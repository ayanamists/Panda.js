<!DOCTYPE html><html lang="zh-cn"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/c9a5bc6a7c948fb0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="https://homepages.inf.ed.ac.uk/wadler/gj/gj-front-full.jpg"/><link rel="stylesheet" href="/_next/static/css/2f71e0d51b6954c9.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/14f639173c0fa12c.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/ad2762ca96cee671.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/ecc949282143a457.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-4e8d71c3f65c460f.js"/><script src="/_next/static/chunks/1dd3208c-0a1ade3a7807b4cc.js" async=""></script><script src="/_next/static/chunks/286-ccdecb91557a793d.js" async=""></script><script src="/_next/static/chunks/main-app-1543724a55492158.js" async=""></script><script src="/_next/static/chunks/747-879f06f58d5428f6.js" async=""></script><script src="/_next/static/chunks/90-e6624b714e201f6f.js" async=""></script><script src="/_next/static/chunks/469-7ee2e4c850f58403.js" async=""></script><script src="/_next/static/chunks/77-c317134e9c0b89a6.js" async=""></script><script src="/_next/static/chunks/app/%5Blocale%5D/posts/%5Bslug%5D/page-2a39348e7db57b3c.js" async=""></script><script src="/_next/static/chunks/944-9bb2cecf6cff7ac4.js" async=""></script><script src="/_next/static/chunks/912-713feb4e15afe337.js" async=""></script><script src="/_next/static/chunks/app/%5Blocale%5D/layout-d7b4eb7e7410d18b.js" async=""></script><title>Aya&#x27;s Blog</title><meta name="description" content="A site powered by next.js and pandoc"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="48x48"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_aaf875 text-foreground bg-background min-h-screen"><div data-overlay-container="true"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><nav class="flex z-40 w-full h-auto items-center justify-center data-[menu-open=true]:border-none sticky top-0 inset-x-0 backdrop-blur-lg data-[menu-open=true]:backdrop-blur-xl backdrop-saturate-150 bg-background/70" style="--navbar-height:4rem;transform:none"><header class="z-40 flex px-6 gap-4 w-full flex-row relative flex-nowrap items-center justify-between h-[var(--navbar-height)] max-w-[1024px]"><div class="basis-0 flex-grow flex-nowrap justify-start bg-transparent items-center no-underline text-medium whitespace-nowrap box-border flex flex-row gap-4"><p class="font-bold text-inherit"><a aria-label="主页" href="/zh-cn">主页</a></p><li class="text-medium whitespace-nowrap box-border list-none data-[active=true]:font-semibold"><a class="font-bold" aria-label="博客" href="/zh-cn/blog">博客</a></li><li class="text-medium whitespace-nowrap box-border list-none data-[active=true]:font-semibold"><a class="font-bold" aria-label="园地" href="/zh-cn/favorites">园地</a></li></div><ul class="flex h-full flex-row flex-nowrap items-center data-[justify=start]:justify-start data-[justify=start]:flex-grow data-[justify=start]:basis-0 data-[justify=center]:justify-center data-[justify=end]:justify-end data-[justify=end]:flex-grow data-[justify=end]:basis-0 gap-1" data-justify="end"><li class="text-medium whitespace-nowrap box-border list-none data-[active=true]:font-semibold"><button class="group relative inline-flex items-center justify-center box-border appearance-none select-none whitespace-nowrap overflow-hidden tap-highlight-transparent outline-none data-[focus-visible=true]:z-10 data-[focus-visible=true]:outline-2 data-[focus-visible=true]:outline-focus data-[focus-visible=true]:outline-offset-2 gap-2 rounded-medium px-0 !gap-0 data-[pressed=true]:scale-[0.97] transition-transform-colors-opacity motion-reduce:transition-none bg-transparent text-default-foreground data-[hover=true]:bg-default/40 min-w-10 w-10 h-10 z-10 aria-expanded:scale-[0.97] aria-expanded:opacity-70 subpixel-antialiased text-md font-bold" type="button" aria-label="Select Language" data-slot="trigger" id="react-aria-:R1j6fja:" aria-haspopup="true" aria-expanded="false">文/A</button></li><li class="text-medium whitespace-nowrap box-border list-none data-[active=true]:font-semibold"></li></ul></header></nav><div class=" relative w-full px-6 py-12 shadow-xl  shadow-slate-700/20 ring-1 ring-gray-900/5 dark:shadow-slate-300/20 dark:ring-gray-100/5 dark:shadow-slate-900/10 md:max-w-3xl md:mx-auto lg:max-w-4xl lg:pt-16 lg:pb-28 prose prose-natural dark:prose-invert"><article><h1 class="text-4xl font-bold mb-2">C++ 模板与参数多态的根本区别</h1><div class="text-sm text-gray-500 mb-5">9/14/2021</div><div class="toc" id="toc"><ul><li><a href="#c-模板与参数多态" id="toc-c-模板与参数多态">C++<!-- --> <!-- -->模板与参数多态</a></li><li><a href="#到底什么是参数多态" id="toc-到底什么是参数多态">到底什么是参数多态</a></li><li><a href="#c模板满足命题1.吗" id="toc-c模板满足命题1.吗">C++模板满足命题1.吗？</a></li><li><a href="#类型类影响问题吗" id="toc-类型类影响问题吗">类型类影响问题吗？</a></li><li><a href="#真假泛型性能更好" id="toc-真假泛型性能更好">真假泛型？性能更好？</a></li><li><a href="#concept-能解决问题吗" id="toc-concept-能解决问题吗">Concept:<!-- --> <!-- -->能解决问题吗？</a></li></ul></div><h2 class="text-3xl" id="c-模板与参数多态"><a color="secondary" class="pr-3 no-underline hover:underline" href="#c-模板与参数多态">#</a>C++<!-- --> <!-- -->模板与参数多态</h2><p>模板(template)是一种<!-- --> <!-- -->C++<!-- --> <!-- -->语言特性，类似于：</p><pre style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-cpp" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span class="token" style="color:hsl(286, 60%, 67%)">template</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token" style="color:hsl(286, 60%, 67%)">class</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">T</span><span class="token" style="color:hsl(207, 82%, 66%)">&gt;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span><span>T </span><span class="token" style="color:hsl(207, 82%, 66%)">id</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>T x</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">3</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> x</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">4</span><span></span><span class="token" style="color:hsl(220, 14%, 71%)">}</span></code></pre><p>这里的<!-- --> <code>T</code> <!-- -->可以是任意类型。很多人都注意到了这与参数多态(parametric<!-- --> <!-- -->polymorphism)的相似性，更有甚者直接把模板机制看作是一种参数多态。比如这份<a href="https://www.cs.bham.ac.uk/~hxt/2015/c-plus-plus/templates-slides.pdf">ppt</a>和这个<a href="https://catonmat.net/cpp-polymorphism">网页</a>。</p><p>然而这篇博客中，我将会说明，<strong>无论<!-- --> <!-- -->C++<!-- --> <!-- -->模板到底是不是一个好的语言特性，它都和参数多态有根本性的区别</strong>。</p><h2 class="text-3xl" id="到底什么是参数多态"><a color="secondary" class="pr-3 no-underline hover:underline" href="#到底什么是参数多态">#</a>到底什么是参数多态</h2><p>参数多态的历史要追溯一份讲义(<a href="https://link.springer.com/article/10.1023%2FA%3A1010000313106">Fundamental<!-- --> <!-- -->Concepts<!-- --> <!-- -->in<!-- --> <!-- -->Programming<!-- --> <!-- -->Languages</a>)，讲义虽然主要描述的是<!-- --> <!-- -->CPL<!-- --> <!-- -->语言，但是实际上这一段应该描述的是<!-- --> <!-- -->LISP<!-- --> <!-- -->的<!-- --> <!-- -->MAP<!-- --> <!-- -->函数：</p><blockquote><p>Parametric<!-- --> <!-- -->polymorphism<!-- --> <!-- -->is<!-- --> <!-- -->more<!-- --> <!-- -->regular<!-- --> <!-- -->and<!-- --> <!-- -->may<!-- --> <!-- -->be<!-- --> <!-- -->illustrated<!-- --> <!-- -->by<!-- --> <!-- -->an<!-- --> <!-- -->example.<!-- --> <!-- -->Suppose<!-- --> <!-- -->f<!-- --> <!-- -->is<!-- --> <!-- -->a<!-- --> <!-- -->function<!-- --> <!-- -->whose<!-- --> <!-- -->argument<!-- --> <!-- -->is<!-- --> <!-- -->of<!-- --> <!-- -->type<!-- --> <!-- -->α<!-- --> <!-- -->and<!-- --> <!-- -->whose<!-- --> <!-- -->results<!-- --> <!-- -->is<!-- --> <!-- -->of<!-- --> <!-- -->β<!-- --> <!-- -->(so<!-- --> <!-- -->that<!-- --> <!-- -->the<!-- --> <!-- -->type<!-- --> <!-- -->of<!-- --> <!-- -->f<!-- --> <!-- -->might<!-- --> <!-- -->be<!-- --> <!-- -->written<!-- --> <!-- -->α<!-- --> <!-- -->⇒<!-- --> <!-- -->β),<!-- --> <!-- -->and<!-- --> <!-- -->that<!-- --> <!-- -->L<!-- --> <!-- -->is<!-- --> <!-- -->a<!-- --> <!-- -->list<!-- --> <!-- -->whose<!-- --> <!-- -->elements<!-- --> <!-- -->are<!-- --> <!-- -->all<!-- --> <!-- -->of<!-- --> <!-- -->type<!-- --> <!-- -->α<!-- --> <!-- -->(so<!-- --> <!-- -->that<!-- --> <!-- -->the<!-- --> <!-- -->type<!-- --> <!-- -->of<!-- --> <!-- -->L<!-- --> <!-- -->is<!-- --> <!-- -->α<!-- --> <!-- -->list).<!-- --> <!-- -->We<!-- --> <!-- -->can<!-- --> <!-- -->imagine<!-- --> <!-- -->a<!-- --> <!-- -->function,<!-- --> <!-- -->say<!-- --> <!-- -->Map,<!-- --> <!-- -->which<!-- --> <!-- -->applies<!-- --> <!-- -->f<!-- --> <!-- -->in<!-- --> <!-- -->turn<!-- --> <!-- -->to<!-- --> <!-- -->each<!-- --> <!-- -->member<!-- --> <!-- -->of<!-- --> <!-- -->L<!-- --> <!-- -->and<!-- --> <!-- -->makes<!-- --> <!-- -->a<!-- --> <!-- -->list<!-- --> <!-- -->of<!-- --> <!-- -->the<!-- --> <!-- -->results.<!-- --> <!-- -->Thus<!-- --> <!-- -->Map[f,L]<!-- --> <!-- -->will<!-- --> <!-- -->produce<!-- --> <!-- -->a<!-- --> <!-- -->β<!-- --> <!-- -->list.<!-- --> <!-- -->We<!-- --> <!-- -->would<!-- --> <!-- -->like<!-- --> <!-- -->Map<!-- --> <!-- -->to<!-- --> <!-- -->work<!-- --> <!-- -->on<!-- --> <!-- -->all<!-- --> <!-- -->types<!-- --> <!-- -->of<!-- --> <!-- -->list<!-- --> <!-- -->provided<!-- --> <!-- -->f<!-- --> <!-- -->was<!-- --> <!-- -->a<!-- --> <!-- -->suitable<!-- --> <!-- -->function,<!-- --> <!-- -->so<!-- --> <!-- -->that<!-- --> <!-- -->Map<!-- --> <!-- -->would<!-- --> <!-- -->have<!-- --> <!-- -->to<!-- --> <!-- -->be<!-- --> <!-- -->polymorphic.<!-- --> <!-- -->However<!-- --> <!-- -->its<!-- --> <!-- -->polymorphism<!-- --> <!-- -->is<!-- --> <!-- -->of<!-- --> <!-- -->a<!-- --> <!-- -->particularly<!-- --> <!-- -->simple<!-- --> <!-- -->parametric<!-- --> <!-- -->type<!-- --> <!-- -->which<!-- --> <!-- -->could<!-- --> <!-- -->be<!-- --> <!-- -->written</p></blockquote><div><div class="overflow-auto"><div data-testid="react-katex"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><mi>α</mi><mo>→</mo><mi>β</mi><mo separator="true">,</mo><mi>α</mi><mtext> list</mtext><mo stretchy="false">)</mo><mo>→</mo><mi>β</mi><mtext> list</mtext></mrow><annotation encoding="application/x-tex">
(α → β , α\ \text{list}) → β \ \text{list}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mspace"> </span><span class="mord text"><span class="mord">list</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mspace"> </span><span class="mord text"><span class="mord">list</span></span></span></span></span></span></div></div></div><p>1975<!-- --> <!-- -->年的<!-- --> <!-- -->ML<!-- --> <!-- -->语言在类型系统的层面上实现了这种多态。在<!-- --> <!-- -->ML<!-- --> <!-- -->类语言中，一个函数的类型中可以含有类型变量，例如如下的<code>id</code>函数：</p><pre style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-ocaml" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span class="token" style="color:hsl(286, 60%, 67%)">let</span><span> id </span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>x</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span class="token type-variable" style="color:hsl(207, 82%, 66%)">&#x27;a</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> x</span></code></pre><p><code>id</code>函数的类型是<code>&#x27;a -&gt; &#x27;a</code>，其中<code>&#x27;a</code>就是一个类型变量，它可以与<strong>任意</strong>类型相匹配，所以得到</p><pre style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-ocaml" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span>id </span><span class="token" style="color:hsl(29, 54%, 61%)">1</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span><span>id </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;ssdfs&quot;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">3</span><span>id </span><span class="token" style="color:hsl(29, 54%, 61%)">1.23</span></code></pre><p>都是合法的表达式。ML<!-- --> <!-- -->类语言的类型系统可以看作是对<!-- --> <!-- -->System<!-- --> <!-- -->F<!-- --> <!-- -->进行限制和扩展后的系统。System<!-- --> <!-- -->F<!-- --> <!-- -->可以看作对<!-- --> <!-- -->λ<!-- --> <!-- -->表达式的扩展，在<!-- --> <!-- -->System<!-- --> <!-- -->F<!-- --> <!-- -->中，λ<!-- --> <!-- -->表达式的每个绑定变量都必须给定一个类型，而这个类型则是通过<!-- --> <span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Λ</mi></mrow><annotation encoding="application/x-tex">Λ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Λ</span></span></span></span></span>（大写的λ）引入的。</p><p>具体来说，最基本的λ表达式<!-- --> <span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>λ</mi><mi>x</mi><mi mathvariant="normal">.</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">λx.x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">λ</span><span class="mord mathnormal">x</span><span class="mord">.</span><span class="mord mathnormal">x</span></span></span></span></span> <!-- -->在<!-- --> <!-- -->System<!-- --> <!-- -->F<!-- --> <!-- -->中应该写作：</p><div><div class="overflow-auto"><div data-testid="react-katex"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">Λ</mi><mi>t</mi><mi mathvariant="normal">.</mi><mi>λ</mi><mo stretchy="false">(</mo><mi>x</mi><mo>:</mo><mi>t</mi><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">
Λt.λ (x:t).x
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Λ</span><span class="mord mathnormal">t</span><span class="mord">.</span><span class="mord mathnormal">λ</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mord">.</span><span class="mord mathnormal">x</span></span></span></span></span></div></div></div><p>而这个表达式的类型是</p><div><div class="overflow-auto"><div data-testid="react-katex"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">∀</mi><mi>t</mi><mi mathvariant="normal">.</mi><mi>t</mi><mo>→</mo><mi>t</mi></mrow><annotation encoding="application/x-tex">
∀t.t → t
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">∀</span><span class="mord mathnormal">t</span><span class="mord">.</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span></span></div></div></div><p>这个大<!-- --> <span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Λ</mi></mrow><annotation encoding="application/x-tex">Λ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Λ</span></span></span></span></span> <!-- -->引入的类型变量在使用时需要得到显式<!-- --> <!-- -->apply（就像对小<!-- --> <span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>λ</mi></mrow><annotation encoding="application/x-tex">λ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">λ</span></span></span></span></span> <!-- -->的<!-- --> <!-- -->apply<!-- --> <!-- -->一样）。在<!-- --> <!-- -->System<!-- --> <!-- -->F<!-- --> <!-- -->中，类似于<!-- --> <!-- -->λ<!-- --> <!-- -->表达式，没有除了<!-- --> <span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>λ</mi></mrow><annotation encoding="application/x-tex">λ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">λ</span></span></span></span></span>、<span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Λ</mi></mrow><annotation encoding="application/x-tex">Λ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Λ</span></span></span></span></span> <!-- -->和<!-- --> <span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∀</mi></mrow><annotation encoding="application/x-tex">∀</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">∀</span></span></span></span></span> <!-- -->以外的东西，如果给它暂时加入整数类型（例如<span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>:</mo><mtext>Int</mtext></mrow><annotation encoding="application/x-tex">1: \text{Int}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord text"><span class="mord">Int</span></span></span></span></span></span>），那么就可以给出这样的求值实例:</p><div><div class="overflow-auto"><div data-testid="react-katex"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi mathvariant="normal">Λ</mi><mi>t</mi><mi mathvariant="normal">.</mi><mi>λ</mi><mo stretchy="false">(</mo><mi>x</mi><mo>:</mo><mi>t</mi><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi><mi>x</mi><mo stretchy="false">)</mo><mtext>Int</mtext><mo stretchy="false">)</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>⇒</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo stretchy="false">(</mo><mi>λ</mi><mo stretchy="false">(</mo><mi>x</mi><mo>:</mo><mtext>Int</mtext><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi><mi>x</mi><mo stretchy="false">)</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>⇒</mo><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">
\begin{aligned}
((Λ t. λ (x:t). x) \text{Int})1 &amp; \Rightarrow \\
(λ (x:\text{Int}). x) 1 &amp; \Rightarrow 1
\end{aligned}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.75em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">((</span><span class="mord">Λ</span><span class="mord mathnormal">t</span><span class="mord">.</span><span class="mord mathnormal">λ</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mord">.</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord text"><span class="mord">Int</span></span><span class="mclose">)</span><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathnormal">λ</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">Int</span></span><span class="mclose">)</span><span class="mord">.</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.25em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.75em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⇒</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.25em;"><span></span></span></span></span></span></span></span></span></span></span></span></div></div></div><p>由于Hindey-Milner类型推理算法的存在，ML类语言中无须手动给出这样的<!-- --> <span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Int</mtext></mrow><annotation encoding="application/x-tex">\text{Int}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord text"><span class="mord">Int</span></span></span></span></span></span>，函数的类型也会自动推导为带有全称量词的形式。虽然为了进行推理，某些在<!-- --> <!-- -->System<!-- --> <!-- -->F<!-- --> <!-- -->中合法的式子不能在<!-- --> <!-- -->ML<!-- --> <!-- -->中被构造，但搞清楚<!-- --> <!-- -->System<!-- --> <!-- -->F<!-- --> <!-- -->的类型规则对接下来的讨论是大有裨益的。</p><p>System<!-- --> <!-- -->F的类型规则分为四个规则：</p><ol><li><div><div class="overflow-auto"><div data-testid="react-katex"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mfrac><mrow><mi mathvariant="normal">Γ</mi><mo separator="true">,</mo><mo stretchy="false">(</mo><mi>x</mi><mo>:</mo><msub><mi>t</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>⊢</mo><mi>y</mi><mo>:</mo><msub><mi>t</mi><mn>2</mn></msub></mrow><mrow><mi mathvariant="normal">Γ</mi><mo>⊢</mo><mo stretchy="false">(</mo><mi>λ</mi><mo stretchy="false">(</mo><mi>x</mi><mo>:</mo><msub><mi>t</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi><mi>y</mi><mo stretchy="false">)</mo><mo>:</mo><msub><mi>t</mi><mn>1</mn></msub><mo>→</mo><msub><mi>t</mi><mn>2</mn></msub></mrow></mfrac><mrow></mrow></msub></mrow><annotation encoding="application/x-tex">
  {\frac{Γ , (x:t_1) ⊢ y:t_2}{Γ ⊢ (λ(x:t_1).y):t_1 → t_2}}_{}
  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4127em;vertical-align:-0.9857em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">Γ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊢</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord mathnormal">λ</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">Γ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊢</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.9857em;"><span style="top:-1.0143em;margin-right:0.05em;"><span class="pstrut" style="height:2em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9857em;"><span></span></span></span></span></span></span></span></span></span></span></div></div></div></li><li><div><div class="overflow-auto"><div data-testid="react-katex"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">Γ</mi><mo separator="true">,</mo><mi>A</mi><mo>:</mo><mrow><mi mathvariant="bold">t</mi><mi mathvariant="bold">y</mi><mi mathvariant="bold">p</mi><mi mathvariant="bold">e</mi></mrow><mo>⊢</mo><mi>x</mi><mo>:</mo><msub><mi>t</mi><mn>1</mn></msub></mrow><mrow><mi mathvariant="normal">Γ</mi><mo>⊢</mo><mo stretchy="false">(</mo><mi mathvariant="normal">Λ</mi><mi>A</mi><mi mathvariant="normal">.</mi><mi>x</mi><mo stretchy="false">)</mo><mo>:</mo><mi mathvariant="normal">∀</mi><mi>A</mi><mi mathvariant="normal">.</mi><msub><mi>t</mi><mn>1</mn></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">
  \frac{Γ , A:\bold{type} ⊢ x:t_1 }{ Γ ⊢ (Λ A.x): ∀ A. t_1}
  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.3074em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">Γ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊢</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord">Λ</span><span class="mord mathnormal">A</span><span class="mord">.</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">∀</span><span class="mord mathnormal">A</span><span class="mord">.</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">Γ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathbf">type</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊢</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></div></div></li><li><div><div class="overflow-auto"><div data-testid="react-katex"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">Γ</mi><mo>⊢</mo><mi>x</mi><mo>:</mo><mo stretchy="false">(</mo><msub><mi>t</mi><mn>1</mn></msub><mo>→</mo><msub><mi>t</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>y</mi><mo>:</mo><msub><mi>t</mi><mn>1</mn></msub></mrow><mrow><mi mathvariant="normal">Γ</mi><mo>⊢</mo><mo stretchy="false">(</mo><mi>x</mi><mtext> </mtext><mi>y</mi><mo stretchy="false">)</mo><mo>:</mo><msub><mi>t</mi><mn>2</mn></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">
  \frac{Γ ⊢ x:(t_1 → t_2), y:t_1}{Γ ⊢ (x\ y): t_2}
  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">Γ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊢</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">Γ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊢</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></div></div></li><li><div><div class="overflow-auto"><div data-testid="react-katex"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">Γ</mi><mo>⊢</mo><mi>x</mi><mo>:</mo><mo stretchy="false">(</mo><mi mathvariant="normal">∀</mi><mi>A</mi><mi mathvariant="normal">.</mi><msub><mi>t</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mtext>    </mtext><mo stretchy="false">(</mo><mi>B</mi><mo>:</mo><mrow><mi mathvariant="bold">t</mi><mi mathvariant="bold">y</mi><mi mathvariant="bold">p</mi><mi mathvariant="bold">e</mi></mrow><mo stretchy="false">)</mo></mrow><mrow><mi mathvariant="normal">Γ</mi><mo>⊢</mo><mo stretchy="false">(</mo><mi>x</mi><mtext> </mtext><mi>B</mi><mo stretchy="false">)</mo><mo>:</mo><mo stretchy="false">[</mo><mi>B</mi><mi mathvariant="normal">/</mi><mi>A</mi><mo stretchy="false">]</mo><msub><mi>t</mi><mn>1</mn></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">
  \frac{Γ ⊢ x:(∀A.t_1)\  \ \ \ (B:\bold{type})}{ Γ ⊢ (x\ B):[B/A]t_1}
  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">Γ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊢</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord">/</span><span class="mord mathnormal">A</span><span class="mclose">]</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">Γ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊢</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord">∀</span><span class="mord mathnormal">A</span><span class="mord">.</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace"> </span><span class="mspace"> </span><span class="mspace"> </span><span class="mspace"> </span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathbf">type</span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></div></div></li></ol><p>从规则2.中可以看到，这里的<!-- --> <span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span></span> <!-- -->是<strong>任意</strong>的类型，引入这个<!-- --> <span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Λ</mi></mrow><annotation encoding="application/x-tex">Λ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Λ</span></span></span></span></span> <!-- -->的条件是无论<!-- --> <span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span></span> <!-- -->到底是什么类型，它都可以推出<!-- --> <span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span> <!-- -->是<!-- --> <span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">t₁</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> <!-- -->类型。这样一来，在规则4.中，<span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span></span> <!-- -->也是一个<strong>任意</strong>的类型。可以不加证明地得到：</p><blockquote><p><strong>命题1.</strong> <!-- -->如果<!-- --> <span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi mathvariant="normal">Λ</mi><mi>A</mi><mi mathvariant="normal">.</mi><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(ΛA.x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">Λ</span><span class="mord mathnormal">A</span><span class="mord">.</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span> <!-- -->是一个系统F中的封闭项，那么对于任意的类型<!-- --> <span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span></span>，<span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi mathvariant="normal">Λ</mi><mi>A</mi><mi mathvariant="normal">.</mi><mi>x</mi><mo stretchy="false">)</mo><mtext> </mtext><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">((ΛA.x)\ t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">((</span><span class="mord">Λ</span><span class="mord mathnormal">A</span><span class="mord">.</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace"> </span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></span> <!-- -->是一个系统F中的封闭项。</p></blockquote><p>命题1.是任何声称自己实现了参数多态的系统所必须满足的命题。在ML类语言中，它表现为，一个类型为<code>&#x27;a -&gt; b</code>（这里的<code>b</code>没有加引号，表示任何可能的类型，比如<code>&#x27;a</code>，这样一来就是<code>&#x27;a -&gt; &#x27;a</code>）的函数<code>f</code>，对于任何类型为<code>t</code>的合法ML表达式<code>x</code>，<code>f x</code>的类型都是<code>[t/&#x27;a]b</code>.</p><p>例如之前的<code>id</code>函数，<code>id 10</code>的类型就是<code>[int/&#x27;a]&#x27;a</code>，即<code>int</code>.</p><p>事实上，参数多态满足更强的条件–parametricity，鉴于比较复杂，这里暂不解释其含义。</p><h2 class="text-3xl" id="c模板满足命题1.吗"><a color="secondary" class="pr-3 no-underline hover:underline" href="#c模板满足命题1.吗">#</a>C++模板满足命题1.吗？</h2><p>答案是很显然的：<strong>不满足</strong>。这也就是为什么C++模板不是参数多态的一个原因。</p><p>例如说，<code>id</code>函数可以写成：</p><pre style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-cpp" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span class="token" style="color:hsl(286, 60%, 67%)">template</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token" style="color:hsl(286, 60%, 67%)">class</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">T</span><span class="token" style="color:hsl(207, 82%, 66%)">&gt;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span><span>T </span><span class="token" style="color:hsl(207, 82%, 66%)">id</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>T x</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">3</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">10</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">4</span><span></span><span class="token" style="color:hsl(220, 14%, 71%)">}</span></code></pre><p>如果之前没有写过，你可能会惊讶地发现，这竟然是<strong>不会报错</strong>的！事实上，无论怎么写，它都不会报错：</p><pre style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-cpp" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span class="token" style="color:hsl(286, 60%, 67%)">template</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token" style="color:hsl(286, 60%, 67%)">class</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">T</span><span class="token" style="color:hsl(207, 82%, 66%)">&gt;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">int</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">id</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>T x</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">3</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> x</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">4</span><span></span><span class="token" style="color:hsl(220, 14%, 71%)">}</span></code></pre><p>它真正报错的位置，是在对<code>id</code>函数进行使用的时候：</p><pre style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-cpp" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span class="token" style="color:hsl(286, 60%, 67%)">auto</span><span> x </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">id</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;sdfsdf&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">3</span><span></span><span class="token" style="color:hsl(207, 82%, 66%)">--</span><span class="token" style="color:hsl(207, 82%, 66%)">--</span><span class="token" style="color:hsl(207, 82%, 66%)">--</span><span class="token" style="color:hsl(207, 82%, 66%)">--</span><span class="token" style="color:hsl(207, 82%, 66%)">--</span><span class="token" style="color:hsl(207, 82%, 66%)">--</span><span class="token" style="color:hsl(207, 82%, 66%)">--</span><span class="token" style="color:hsl(207, 82%, 66%)">--</span><span class="token" style="color:hsl(207, 82%, 66%)">--</span><span class="token" style="color:hsl(207, 82%, 66%)">--</span><span class="token" style="color:hsl(207, 82%, 66%)">--</span><span class="token" style="color:hsl(207, 82%, 66%)">--</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">4</span><span></span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>\test</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>cpp</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span class="token" style="color:hsl(29, 54%, 61%)">5</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span class="token" style="color:hsl(29, 54%, 61%)">10</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span> error</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span> cannot initialize </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> object of type </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;const char *&#x27;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">5</span><span>      with an rvalue of type </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;int&#x27;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">6</span><span>  </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">10</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">7</span><span>         </span><span class="token" style="color:hsl(207, 82%, 66%)">^</span><span class="token" style="color:hsl(207, 82%, 66%)">~</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">8</span><span></span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>\test</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>cpp</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span class="token" style="color:hsl(29, 54%, 61%)">9</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span class="token" style="color:hsl(29, 54%, 61%)">14</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span> note</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span> in instantiation of function </span><span class="token" style="color:hsl(286, 60%, 67%)">template</span><span> specialization       
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">9</span><span>      </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;id&lt;const char *&gt;&#x27;</span><span> requested here
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">10</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">auto</span><span> y </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">id</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;s&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">11</span><span>             </span><span class="token" style="color:hsl(207, 82%, 66%)">^</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">12</span><span></span><span class="token" style="color:hsl(29, 54%, 61%)">1</span><span> error generated</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span></code></pre><p>这诉说了一个无情的真相：C++<!-- --> <!-- -->编译器不会对模板函数进行类型检查，只会在<strong>特化</strong>的时候进行类型检查。而这使得命题1.无法成立，因为我们根本没有保证在<code>T</code>是一个类型，<code>x</code>是<code>T</code>类型的情况下，可以推出<code>id</code>函数体（也就是<code>return x</code>）的类型是<code>T</code>.</p><p>相反，ocaml<!-- --> <!-- -->会无视泛型参数：</p><pre style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-ocaml" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span class="token" style="color:hsl(220, 14%, 71%)">#</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">let</span><span> id </span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>x</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token type-variable" style="color:hsl(207, 82%, 66%)">&#x27;a</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> int </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> x </span><span class="token" style="color:hsl(220, 14%, 71%)">;;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">val</span><span> id </span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> int </span><span class="token" style="color:hsl(207, 82%, 66%)">-&gt;</span><span> int </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token" style="color:hsl(286, 60%, 67%)">fun</span><span class="token" style="color:hsl(207, 82%, 66%)">&gt;</span></code></pre><pre style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-ocaml" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span class="token" style="color:hsl(220, 14%, 71%)">#</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">let</span><span> id </span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>x</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token type-variable" style="color:hsl(207, 82%, 66%)">&#x27;a</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token type-variable" style="color:hsl(207, 82%, 66%)">&#x27;a</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">10</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">;;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">val</span><span> id </span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> int </span><span class="token" style="color:hsl(207, 82%, 66%)">-&gt;</span><span> int </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token" style="color:hsl(286, 60%, 67%)">fun</span><span class="token" style="color:hsl(207, 82%, 66%)">&gt;</span></code></pre><p>Haskell<!-- --> <!-- -->会报错：</p><pre style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-haskell" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span class="token" style="color:hsl(29, 54%, 61%)">Prelude</span><span class="token" style="color:hsl(207, 82%, 66%)">&gt;</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span><span></span><span class="token" style="color:hsl(29, 54%, 61%)">Prelude</span><span class="token" style="color:hsl(207, 82%, 66%)">|</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">id</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">::</span><span> </span><span class="token hvariable">a</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">-&gt;</span><span> </span><span class="token hvariable">a</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">3</span><span></span><span class="token" style="color:hsl(29, 54%, 61%)">Prelude</span><span class="token" style="color:hsl(207, 82%, 66%)">|</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">id</span><span> </span><span class="token hvariable">x</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">10</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">4</span><span></span><span class="token" style="color:hsl(29, 54%, 61%)">Prelude</span><span class="token" style="color:hsl(207, 82%, 66%)">|</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">5</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">6</span><span></span><span class="token" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token hvariable">interactive</span><span class="token" style="color:hsl(207, 82%, 66%)">&gt;:</span><span class="token" style="color:hsl(29, 54%, 61%)">6</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span class="token" style="color:hsl(29, 54%, 61%)">8</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">error</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">7</span><span>    • </span><span class="token" style="color:hsl(29, 54%, 61%)">No</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">instance</span><span> </span><span class="token hvariable">for</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(29, 54%, 61%)">Num</span><span> </span><span class="token hvariable">a</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token hvariable">arising</span><span> </span><span class="token hvariable">from</span><span> </span><span class="token hvariable">the</span><span> </span><span class="token hvariable">literal</span><span> ‘</span><span class="token" style="color:hsl(29, 54%, 61%)">10</span><span>’
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">8</span><span>      </span><span class="token" style="color:hsl(29, 54%, 61%)">Possible</span><span> </span><span class="token hvariable">fix</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">9</span><span>        </span><span class="token hvariable">add</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(29, 54%, 61%)">Num</span><span> </span><span class="token hvariable">a</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token hvariable">to</span><span> </span><span class="token hvariable">the</span><span> </span><span class="token hvariable">context</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">of</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">10</span><span>          </span><span class="token hvariable">the</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">type</span><span> </span><span class="token hvariable">signature</span><span> </span><span class="token hvariable">for</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">11</span><span>            </span><span class="token" style="color:hsl(95, 38%, 62%)">id</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">::</span><span> </span><span class="token hvariable">forall</span><span> </span><span class="token hvariable">a</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span> </span><span class="token hvariable">a</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">-&gt;</span><span> </span><span class="token hvariable">a</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">12</span><span>    • </span><span class="token" style="color:hsl(29, 54%, 61%)">In</span><span> </span><span class="token hvariable">the</span><span> </span><span class="token hvariable">expression</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">10</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">13</span><span>      </span><span class="token" style="color:hsl(29, 54%, 61%)">In</span><span> </span><span class="token hvariable">an</span><span> </span><span class="token hvariable">equation</span><span> </span><span class="token hvariable">for</span><span> ‘</span><span class="token" style="color:hsl(95, 38%, 62%)">id</span><span>’</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">id</span><span> </span><span class="token hvariable">x</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">10</span></code></pre><pre style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-haskell" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span class="token" style="color:hsl(29, 54%, 61%)">Prelude</span><span class="token" style="color:hsl(207, 82%, 66%)">&gt;</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span><span></span><span class="token" style="color:hsl(29, 54%, 61%)">Prelude</span><span class="token" style="color:hsl(207, 82%, 66%)">|</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">id</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">::</span><span> </span><span class="token hvariable">a</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">-&gt;</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">Int</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">3</span><span></span><span class="token" style="color:hsl(29, 54%, 61%)">Prelude</span><span class="token" style="color:hsl(207, 82%, 66%)">|</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">id</span><span> </span><span class="token hvariable">x</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token hvariable">x</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">4</span><span></span><span class="token" style="color:hsl(29, 54%, 61%)">Prelude</span><span class="token" style="color:hsl(207, 82%, 66%)">|</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">5</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">6</span><span></span><span class="token" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token hvariable">interactive</span><span class="token" style="color:hsl(207, 82%, 66%)">&gt;:</span><span class="token" style="color:hsl(29, 54%, 61%)">12</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span class="token" style="color:hsl(29, 54%, 61%)">8</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">error</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">7</span><span>    • </span><span class="token" style="color:hsl(29, 54%, 61%)">Couldn&#x27;</span><span class="token hvariable">t</span><span> </span><span class="token hvariable">match</span><span> </span><span class="token hvariable">expected</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">type</span><span> ‘</span><span class="token" style="color:hsl(29, 54%, 61%)">Int</span><span>’ </span><span class="token hvariable">with</span><span> </span><span class="token hvariable">actual</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">type</span><span> ‘</span><span class="token hvariable">a</span><span>’
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">8</span><span>      ‘</span><span class="token hvariable">a</span><span>’ </span><span class="token hvariable">is</span><span> </span><span class="token hvariable">a</span><span> </span><span class="token hvariable">rigid</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">type</span><span> </span><span class="token hvariable">variable</span><span> </span><span class="token hvariable">bound</span><span> </span><span class="token hvariable">by</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">9</span><span>        </span><span class="token hvariable">the</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">type</span><span> </span><span class="token hvariable">signature</span><span> </span><span class="token hvariable">for</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">10</span><span>          </span><span class="token" style="color:hsl(95, 38%, 62%)">id</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">::</span><span> </span><span class="token hvariable">forall</span><span> </span><span class="token hvariable">a</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span> </span><span class="token hvariable">a</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">-&gt;</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">Int</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">11</span><span>        </span><span class="token hvariable">at</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token hvariable">interactive</span><span class="token" style="color:hsl(207, 82%, 66%)">&gt;:</span><span class="token" style="color:hsl(29, 54%, 61%)">11</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span class="token" style="color:hsl(29, 54%, 61%)">1</span><span class="token" style="color:hsl(207, 82%, 66%)">-</span><span class="token" style="color:hsl(29, 54%, 61%)">14</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">12</span><span>    • </span><span class="token" style="color:hsl(29, 54%, 61%)">In</span><span> </span><span class="token hvariable">the</span><span> </span><span class="token hvariable">expression</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span> </span><span class="token hvariable">x</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">13</span><span>      </span><span class="token" style="color:hsl(29, 54%, 61%)">In</span><span> </span><span class="token hvariable">an</span><span> </span><span class="token hvariable">equation</span><span> </span><span class="token hvariable">for</span><span> ‘</span><span class="token" style="color:hsl(95, 38%, 62%)">id</span><span>’</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">id</span><span> </span><span class="token hvariable">x</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token hvariable">x</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">14</span><span>    • </span><span class="token" style="color:hsl(29, 54%, 61%)">Relevant</span><span> </span><span class="token hvariable">bindings</span><span> </span><span class="token hvariable">include</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">15</span><span>        </span><span class="token hvariable">x</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">::</span><span> </span><span class="token hvariable">a</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token hvariable">bound</span><span> </span><span class="token hvariable">at</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token hvariable">interactive</span><span class="token" style="color:hsl(207, 82%, 66%)">&gt;:</span><span class="token" style="color:hsl(29, 54%, 61%)">12</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span class="token" style="color:hsl(29, 54%, 61%)">4</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">16</span><span>        </span><span class="token" style="color:hsl(95, 38%, 62%)">id</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">::</span><span> </span><span class="token hvariable">a</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">-&gt;</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">Int</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token hvariable">bound</span><span> </span><span class="token hvariable">at</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token hvariable">interactive</span><span class="token" style="color:hsl(207, 82%, 66%)">&gt;:</span><span class="token" style="color:hsl(29, 54%, 61%)">12</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span class="token" style="color:hsl(29, 54%, 61%)">1</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span></code></pre><p>可见，C++<!-- --> <!-- -->并不是参数多态，它的模板系统和<!-- --> <!-- -->ML<!-- --> <!-- -->类语言中的泛型系统完全不在一个层次上。</p><h2 class="text-3xl" id="类型类影响问题吗"><a color="secondary" class="pr-3 no-underline hover:underline" href="#类型类影响问题吗">#</a>类型类影响问题吗？</h2><p>有人可能会说了，Haskell<!-- --> <!-- -->的类型类不是也会出现“在使用的时候才报错”这一现象吗？比如说</p><pre style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-haskell" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span class="token" style="color:hsl(95, 38%, 62%)">max</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">::</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">Ord</span><span> </span><span class="token hvariable">p</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">=&gt;</span><span> </span><span class="token hvariable">p</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">-&gt;</span><span> </span><span class="token hvariable">p</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">-&gt;</span><span> </span><span class="token hvariable">p</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span><span></span><span class="token" style="color:hsl(95, 38%, 62%)">max</span><span> </span><span class="token hvariable">x</span><span> </span><span class="token hvariable">y</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">if</span><span> </span><span class="token hvariable">y</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">&gt;</span><span> </span><span class="token hvariable">x</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">then</span><span> </span><span class="token hvariable">y</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">else</span><span> </span><span class="token hvariable">x</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">3</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">4</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">data</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">X</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">I</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">|</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">J</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">5</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">6</span><span></span><span class="token" style="color:hsl(95, 38%, 62%)">max</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">I</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">J</span><span> </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic">-- 这里报错</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">7</span><span></span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic">-- error:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">8</span><span></span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic">--    • No instance for (Ord X) arising from a use of ‘max’</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">9</span><span></span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic">--    • In the expression: max I J</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">10</span><span></span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic">--      In an equation for ‘it’: it = max I J</span></code></pre><p>这个错误简单来说，就是自定义类型<code>X</code>没有实现<code>Ord</code>类型类，而<code>max</code>的<strong>类型签名</strong>中需要类型类<code>Ord</code>，所以报错。这和<!-- --> <!-- -->C++<!-- --> <!-- -->模板仍然很不一样。根本性的区别是，在对<code>max I J</code>进行类型检查的时候，只需要<code>max :: Ord p =&gt; p -&gt; p -&gt; p</code>这一个信息就够了，不需要知道<code>max</code>的函数体是什么，更不需要“特化”这个函数，这仍是在类型系统中的推导。</p><h2 class="text-3xl" id="真假泛型性能更好"><a color="secondary" class="pr-3 no-underline hover:underline" href="#真假泛型性能更好">#</a>真假泛型？性能更好？</h2><p>虽然我并不是很喜欢<!-- --> <!-- -->Java<!-- --> <!-- -->语言，但是<!-- --> <!-- -->Java<!-- --> <!-- -->语言的泛型系统（在一般情况下）满足命题1.，它是真正的参数多态。这是因为<!-- --> <!-- -->Java<!-- --> <!-- -->泛型的前身–Generic<!-- --> <!-- -->Java（GJ）是由<!-- --> <!-- -->Philip<!-- --> <!-- -->Wadler<!-- --> <!-- -->等真正的编程语言专家设计的。</p><figure><div><img src="https://homepages.inf.ed.ac.uk/wadler/gj/gj-front-full.jpg"/></div></figure><p>有人说<!-- --> <!-- -->Java<!-- --> <!-- -->泛型采用了类型擦除，是“假泛型”，这显然是被c++模板的设计影响了。事实上显然参数多态对应的参数类型更有资格把自己叫做“泛型”。c++才是“假泛型”的例子。</p><p>c++模板的设计使得<!-- --> <!-- -->module<!-- --> <!-- -->系统变成了一个困难的问题，到了<!-- --> <!-- -->2021<!-- --> <!-- -->年，99.9%<!-- --> <!-- -->的c++程序仍然在使用上古时代的头文件–这一彻头彻尾的垃圾–模拟<!-- --> <!-- -->module<!-- --> <!-- -->系统。</p><p>至于性能，所谓的“特化”在编程语言中有两个更强的概念可以替代。</p><ul><li>部分求值(partial<!-- --> <!-- -->evaluation)</li><li>内联(inlining)</li></ul><p>特化可以看作是一个部分求值的例子。F#<!-- --> <!-- -->则可以通过字节码反编译回<!-- --> <!-- -->C#，在<a href="https://sharplab.io">sharplab</a>中，可以发现</p><pre style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-fsharp" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span class="token" style="color:hsl(286, 60%, 67%)">let</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">select</span><span> x y </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> x
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">3</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">let</span><span> select2 </span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>x</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span class="token" style="color:hsl(29, 54%, 61%)">int</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>y</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span class="token" style="color:hsl(29, 54%, 61%)">int</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">select</span><span> x y</span></code></pre><p>这样的例子会得到：</p><pre style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-csharp" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span class="token" style="color:hsl(286, 60%, 67%)">using</span><span> </span><span class="token" style="-opacity:0.8">System</span><span class="token" style="-opacity:0.8;color:hsl(220, 14%, 71%)">.</span><span class="token" style="-opacity:0.8">Reflection</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">using</span><span> </span><span class="token" style="-opacity:0.8">Microsoft</span><span class="token" style="-opacity:0.8;color:hsl(220, 14%, 71%)">.</span><span class="token" style="-opacity:0.8">FSharp</span><span class="token" style="-opacity:0.8;color:hsl(220, 14%, 71%)">.</span><span class="token" style="-opacity:0.8">Core</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">3</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">4</span><span></span><span class="token" style="color:hsl(220, 14%, 71%)">[</span><span class="token attribute target" style="color:hsl(286, 60%, 67%)">assembly</span><span class="token attribute" style="color:hsl(220, 14%, 71%)">:</span><span class="token attribute"> </span><span class="token attribute" style="color:hsl(29, 54%, 61%)">FSharpInterfaceDataVersion</span><span class="token attribute attribute-arguments" style="color:hsl(220, 14%, 71%)">(</span><span class="token attribute attribute-arguments" style="color:hsl(29, 54%, 61%)">2</span><span class="token attribute attribute-arguments" style="color:hsl(220, 14%, 71%)">,</span><span class="token attribute attribute-arguments"> </span><span class="token attribute attribute-arguments" style="color:hsl(29, 54%, 61%)">0</span><span class="token attribute attribute-arguments" style="color:hsl(220, 14%, 71%)">,</span><span class="token attribute attribute-arguments"> </span><span class="token attribute attribute-arguments" style="color:hsl(29, 54%, 61%)">0</span><span class="token attribute attribute-arguments" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">]</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">5</span><span></span><span class="token" style="color:hsl(220, 14%, 71%)">[</span><span class="token attribute target" style="color:hsl(286, 60%, 67%)">assembly</span><span class="token attribute" style="color:hsl(220, 14%, 71%)">:</span><span class="token attribute"> </span><span class="token attribute" style="color:hsl(29, 54%, 61%)">AssemblyVersion</span><span class="token attribute attribute-arguments" style="color:hsl(220, 14%, 71%)">(</span><span class="token attribute attribute-arguments" style="color:hsl(95, 38%, 62%)">&quot;0.0.0.0&quot;</span><span class="token attribute attribute-arguments" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">]</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">6</span><span></span><span class="token" style="color:hsl(220, 14%, 71%)">[</span><span class="token attribute" style="color:hsl(29, 54%, 61%)">CompilationMapping</span><span class="token attribute attribute-arguments" style="color:hsl(220, 14%, 71%)">(</span><span class="token attribute attribute-arguments">SourceConstructFlags</span><span class="token attribute attribute-arguments" style="color:hsl(220, 14%, 71%)">.</span><span class="token attribute attribute-arguments">Module</span><span class="token attribute attribute-arguments" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">]</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">7</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">public</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">static</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">class</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">@_</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">8</span><span></span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">9</span><span>    </span><span class="token" style="color:hsl(220, 14%, 71%)">[</span><span class="token attribute" style="color:hsl(29, 54%, 61%)">CompilationArgumentCounts</span><span class="token attribute attribute-arguments" style="color:hsl(220, 14%, 71%)">(</span><span class="token attribute attribute-arguments" style="color:hsl(286, 60%, 67%)">new</span><span class="token attribute attribute-arguments"> </span><span class="token attribute attribute-arguments constructor-invocation" style="color:hsl(29, 54%, 61%)">int</span><span class="token attribute attribute-arguments constructor-invocation" style="color:hsl(29, 54%, 61%)">[</span><span class="token attribute attribute-arguments constructor-invocation" style="color:hsl(29, 54%, 61%)">]</span><span class="token attribute attribute-arguments"> </span><span class="token attribute attribute-arguments" style="color:hsl(220, 14%, 71%)">{</span><span class="token attribute attribute-arguments">
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">10</span><span class="token attribute attribute-arguments">        </span><span class="token attribute attribute-arguments" style="color:hsl(29, 54%, 61%)">1</span><span class="token attribute attribute-arguments" style="color:hsl(220, 14%, 71%)">,</span><span class="token attribute attribute-arguments">
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">11</span><span class="token attribute attribute-arguments">        </span><span class="token attribute attribute-arguments" style="color:hsl(29, 54%, 61%)">1</span><span class="token attribute attribute-arguments">
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">12</span><span class="token attribute attribute-arguments">    </span><span class="token attribute attribute-arguments" style="color:hsl(220, 14%, 71%)">}</span><span class="token attribute attribute-arguments" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">]</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">13</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">public</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">static</span><span> a </span><span class="token generic-method" style="color:hsl(207, 82%, 66%)">select</span><span class="token generic-method generic" style="color:hsl(220, 14%, 71%)">&lt;</span><span class="token generic-method generic" style="color:hsl(29, 54%, 61%)">a</span><span class="token generic-method generic" style="color:hsl(220, 14%, 71%)">,</span><span class="token generic-method generic" style="color:hsl(29, 54%, 61%)"> b</span><span class="token generic-method generic" style="color:hsl(220, 14%, 71%)">&gt;</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(29, 54%, 61%)">a</span><span> x</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">b</span><span> y</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">14</span><span>    </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">15</span><span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> x</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">16</span><span>    </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">17</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">18</span><span>    </span><span class="token" style="color:hsl(220, 14%, 71%)">[</span><span class="token attribute" style="color:hsl(29, 54%, 61%)">CompilationArgumentCounts</span><span class="token attribute attribute-arguments" style="color:hsl(220, 14%, 71%)">(</span><span class="token attribute attribute-arguments" style="color:hsl(286, 60%, 67%)">new</span><span class="token attribute attribute-arguments"> </span><span class="token attribute attribute-arguments constructor-invocation" style="color:hsl(29, 54%, 61%)">int</span><span class="token attribute attribute-arguments constructor-invocation" style="color:hsl(29, 54%, 61%)">[</span><span class="token attribute attribute-arguments constructor-invocation" style="color:hsl(29, 54%, 61%)">]</span><span class="token attribute attribute-arguments"> </span><span class="token attribute attribute-arguments" style="color:hsl(220, 14%, 71%)">{</span><span class="token attribute attribute-arguments">
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">19</span><span class="token attribute attribute-arguments">        </span><span class="token attribute attribute-arguments" style="color:hsl(29, 54%, 61%)">1</span><span class="token attribute attribute-arguments" style="color:hsl(220, 14%, 71%)">,</span><span class="token attribute attribute-arguments">
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">20</span><span class="token attribute attribute-arguments">        </span><span class="token attribute attribute-arguments" style="color:hsl(29, 54%, 61%)">1</span><span class="token attribute attribute-arguments">
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">21</span><span class="token attribute attribute-arguments">    </span><span class="token attribute attribute-arguments" style="color:hsl(220, 14%, 71%)">}</span><span class="token attribute attribute-arguments" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">]</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">22</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">public</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">static</span><span> </span><span class="token return-type" style="color:hsl(286, 60%, 67%)">int</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">select2</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(286, 60%, 67%)">int</span><span> x</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">int</span><span> y</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">23</span><span>    </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">24</span><span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> x</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">25</span><span>    </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">26</span><span></span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">27</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">namespace</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">&lt;</span><span>StartupCode$_</span><span class="token" style="color:hsl(207, 82%, 66%)">&gt;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">28</span><span></span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">29</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">internal</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">static</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">class</span><span> $_
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">30</span><span>    </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">31</span><span>    </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">32</span><span></span><span class="token" style="color:hsl(220, 14%, 71%)">}</span></code></pre><p><code>select2</code>难道不是对<code>select</code>的“特化”吗？由此看来，C++<!-- --> <!-- -->模板的“性能更好”也是很难说清楚的问题。</p><h2 class="text-3xl" id="concept-能解决问题吗"><a color="secondary" class="pr-3 no-underline hover:underline" href="#concept-能解决问题吗">#</a>Concept:<!-- --> <!-- -->能解决问题吗？</h2><p>是否是参数多态，似乎只是一个学术问题。不是参数多态，主要导致的是使用一个参数化类型（parametric<!-- --> <!-- -->type，也就是含有∀的类型）时的潜在错误，pararmetricity<!-- --> <!-- -->不成立，某些定理（比如<code>map f . map g = map (f . g)</code>）也不成立。</p><p>之前已经提到了，Haskell<!-- --> <!-- -->也有会出错的问题。其他<!-- --> <!-- -->ML<!-- --> <!-- -->家族的语言，如果不算上类似<!-- --> <!-- -->F#<!-- --> <!-- -->的<!-- --> <!-- -->object<!-- --> <!-- -->系统的扩展，则基本没有出错的问题，但是需要传递更多参数或显式使用模块（module）系统。F#<!-- --> <!-- -->的<!-- --> <code>List.sortWith</code> <!-- -->的类型就是<!-- --> <code>((&#x27;a -&gt; &#x27;a -&gt; int) -&gt; &#x27;a list -&gt; &#x27;a list)</code>，对于任何<!-- --> <code>&#x27;a</code> <!-- -->都不会出错，但是需要显式地传递一个<!-- --> <!-- -->comparer.</p><p>所以，不是参数多态，也许也不是特别大的问题。</p><p>但说到<!-- --> <!-- -->C++，不是参数多态确实带来了一个相当严重的问题，那就是模板系统给出的报错信息常常令人无从下手。</p><p>例如这样的程序：</p><pre style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-cpp" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span class="token macro directive-hash" style="color:hsl(355, 65%, 65%)">#</span><span class="token macro directive" style="color:hsl(286, 60%, 67%)">include</span><span class="token macro" style="color:hsl(355, 65%, 65%)"> </span><span class="token macro" style="color:hsl(95, 38%, 62%)">&lt;iostream&gt;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span><span></span><span class="token macro directive-hash" style="color:hsl(355, 65%, 65%)">#</span><span class="token macro directive" style="color:hsl(286, 60%, 67%)">include</span><span class="token macro" style="color:hsl(355, 65%, 65%)"> </span><span class="token macro" style="color:hsl(95, 38%, 62%)">&lt;vector&gt;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">3</span><span></span><span class="token macro directive-hash" style="color:hsl(355, 65%, 65%)">#</span><span class="token macro directive" style="color:hsl(286, 60%, 67%)">include</span><span class="token macro" style="color:hsl(355, 65%, 65%)"> </span><span class="token macro" style="color:hsl(95, 38%, 62%)">&lt;algorithm&gt;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">4</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">5</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">class</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">A</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">6</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">7</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">int</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">main</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">8</span><span>    std</span><span class="token double-colon" style="color:hsl(220, 14%, 71%)">::</span><span>vector</span><span class="token" style="color:hsl(207, 82%, 66%)">&lt;</span><span>A</span><span class="token" style="color:hsl(207, 82%, 66%)">&gt;</span><span> v</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">9</span><span>    std</span><span class="token double-colon" style="color:hsl(220, 14%, 71%)">::</span><span class="token" style="color:hsl(207, 82%, 66%)">sort</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>v</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token" style="color:hsl(207, 82%, 66%)">begin</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> v</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token" style="color:hsl(207, 82%, 66%)">end</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">10</span><span></span><span class="token" style="color:hsl(220, 14%, 71%)">}</span></code></pre><p>会产生<!-- --> <!-- -->200<!-- --> <!-- -->行，19kb<!-- --> <!-- -->的报错：</p><pre style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-text" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span>In file included from .\test.cpp:3:
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span>C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.28.29910\include\algorithm:7361:32: error: no matching function for call to object of type &#x27;std::less&lt;&gt;&#x27;
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">3</span>            if (_DEBUG_LT_PRED(_Pred, _Val, *_First)) { // found new earliest element, move to front
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">4</span>...</code></pre><p>为了解决这个问题，C++20<!-- --> <!-- -->引入了<!-- --> <!-- -->concept，concept<!-- --> <!-- -->借鉴了类型类和<!-- --> <!-- -->Java<!-- --> <!-- -->泛型的设计，可以使得我们能写出类似于之前<!-- --> <!-- -->Haskell<!-- --> <!-- -->的<code>max</code>那样的程序：</p><pre style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-cpp" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span class="token macro directive-hash" style="color:hsl(355, 65%, 65%)">#</span><span class="token macro directive" style="color:hsl(286, 60%, 67%)">include</span><span class="token macro" style="color:hsl(355, 65%, 65%)"> </span><span class="token macro" style="color:hsl(95, 38%, 62%)">&lt;iostream&gt;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span><span></span><span class="token macro directive-hash" style="color:hsl(355, 65%, 65%)">#</span><span class="token macro directive" style="color:hsl(286, 60%, 67%)">include</span><span class="token macro" style="color:hsl(355, 65%, 65%)"> </span><span class="token macro" style="color:hsl(95, 38%, 62%)">&lt;algorithm&gt;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">3</span><span></span><span class="token macro directive-hash" style="color:hsl(355, 65%, 65%)">#</span><span class="token macro directive" style="color:hsl(286, 60%, 67%)">include</span><span class="token macro" style="color:hsl(355, 65%, 65%)"> </span><span class="token macro" style="color:hsl(95, 38%, 62%)">&lt;concepts&gt;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">4</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">5</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">template</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token" style="color:hsl(286, 60%, 67%)">class</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">T</span><span class="token" style="color:hsl(207, 82%, 66%)">&gt;</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">requires</span><span> std</span><span class="token double-colon" style="color:hsl(220, 14%, 71%)">::</span><span>equality_comparable</span><span class="token" style="color:hsl(207, 82%, 66%)">&lt;</span><span>T</span><span class="token" style="color:hsl(207, 82%, 66%)">&gt;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">6</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">bool</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">max</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>T x</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> T y</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">7</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">if</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>x </span><span class="token" style="color:hsl(207, 82%, 66%)">&gt;</span><span> y</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">8</span><span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> x</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">9</span><span>    </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">else</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">10</span><span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> y</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">11</span><span>    </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">12</span><span></span><span class="token" style="color:hsl(220, 14%, 71%)">}</span></code></pre><p>如果这时写出：</p><pre style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-cpp" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span class="token" style="color:hsl(286, 60%, 67%)">class</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">A</span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">3</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">int</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">main</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">4</span><span>    </span><span class="token" style="color:hsl(207, 82%, 66%)">max</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(207, 82%, 66%)">A</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">A</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">5</span><span></span><span class="token" style="color:hsl(220, 14%, 71%)">}</span></code></pre><p>编译器会报错：</p><pre style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-text" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span>source&gt;: In function &#x27;int main()&#x27;:
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span>&lt;source&gt;:17:8: error: no matching function for call to &#x27;max(A, A)&#x27;
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">3</span>   17 |     max(A(), A());
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">4</span>      |     ~~~^~~~~~~~~~
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">5</span>&lt;source&gt;:6:6: note: candidate: &#x27;template&lt;class T&gt;  requires  equality_comparable&lt;T&gt; bool max(T, T)&#x27;
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">6</span>    6 | bool max(T x, T y) {
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">7</span>      |      ^~~
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">8</span>&lt;source&gt;:6:6: note:   template argument deduction/substitution failed:
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">9</span>&lt;source&gt;:6:6: note: constraints not satisfied
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">10</span>In file included from /opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/compare:39,
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">11</span>                 from /opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/bits/stl_pair.h:65,
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">12</span>                 from /opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/bits/stl_algobase.h:64,
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">13</span>                 from /opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/bits/char_traits.h:39,
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">14</span>                 from /opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/ios:40,
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">15</span>                 from /opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/ostream:38,
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">16</span>                 from /opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/iostream:39,
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">17</span>                 from &lt;source&gt;:1:
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">18</span>/opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/concepts: In substitution of &#x27;template&lt;class T&gt;  requires  equality_comparable&lt;T&gt; bool max(T, T) [with T = A]&#x27;:
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">19</span>&lt;source&gt;:17:8:   required from here
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">20</span>/opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/concepts:280:15:   required for the satisfaction of &#x27;__weakly_eq_cmp_with&lt;_Tp, _Tp&gt;&#x27; [with _Tp = A]
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">21</span>/opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/concepts:290:13:   required for the satisfaction of &#x27;equality_comparable&lt;T&gt;&#x27; [with T = A]
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">22</span>/opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/concepts:281:4:   in requirements with &#x27;std::remove_reference_t&lt;_Tp&gt;&amp; __t&#x27;, &#x27;std::remove_reference_t&lt;_Up&gt;&amp; __u&#x27; [with _Up = A; _Tp = A]
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">23</span>/opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/concepts:282:17: note: the required expression &#x27;(__t == __u)&#x27; is invalid
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">24</span>  282 |           { __t == __u } -&gt; __boolean_testable;
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">25</span>      |             ~~~~^~~~~~
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">26</span>/opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/concepts:283:17: note: the required expression &#x27;(__t != __u)&#x27; is invalid
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">27</span>  283 |           { __t != __u } -&gt; __boolean_testable;
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">28</span>      |             ~~~~^~~~~~
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">29</span>/opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/concepts:284:17: note: the required expression &#x27;(__u == __t)&#x27; is invalid
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">30</span>  284 |           { __u == __t } -&gt; __boolean_testable;
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">31</span>      |             ~~~~^~~~~~
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">32</span>/opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/concepts:285:17: note: the required expression &#x27;(__u != __t)&#x27; is invalid
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">33</span>  285 |           { __u != __t } -&gt; __boolean_testable;
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">34</span>      |             ~~~~^~~~~~
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">35</span>cc1plus: note: set &#x27;-fconcepts-diagnostics-depth=&#x27; to at least 2 for more detail
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">36</span>Compiler returned: 1</code></pre><p>这里会直接表明A不满足<code>std::equality_comparable</code>的约束。虽然如此，噪音还是非常的多。更重要的是，对于库函数–这种我们不想研究源码的函数，效果还是一般：</p><pre style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-text" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span>n file included from /opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/bits/stl_algobase.h:71,
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span>                 from /opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/bits/char_traits.h:39,
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">3</span>                 from /opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/ios:40,
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">4</span>                 from /opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/ostream:38,
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">5</span>                 from /opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/iostream:39,
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">6</span>                 from &lt;source&gt;:1:
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">7</span>/opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/bits/predefined_ops.h: In instantiation of &#x27;constexpr bool __gnu_cxx::__ops::_Iter_less_iter::operator()(_Iterator1, _Iterator2) const [with _Iterator1 = __gnu_cxx::__normal_iterator&lt;A*, std::vector&lt;A&gt; &gt;; _Iterator2 = __gnu_cxx::__normal_iterator&lt;A*, std::vector&lt;A&gt; &gt;]&#x27;:
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">8</span>/opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/bits/stl_algo.h:1826:14:   required from &#x27;constexpr void std::__insertion_sort(_RandomAccessIterator, _RandomAccessIterator, _Compare) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator&lt;A*, std::vector&lt;A&gt; &gt;; _Compare = __gnu_cxx::__ops::_Iter_less_iter]&#x27;
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">9</span>/opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/bits/stl_algo.h:1866:25:   required from &#x27;constexpr void std::__final_insertion_sort(_RandomAccessIterator, _RandomAccessIterator, _Compare) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator&lt;A*, std::vector&lt;A&gt; &gt;; _Compare = __gnu_cxx::__ops::_Iter_less_iter]&#x27;
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">10</span>/opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/bits/stl_algo.h:1957:31:   required from &#x27;constexpr void std::__sort(_RandomAccessIterator, _RandomAccessIterator, _Compare) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator&lt;A*, std::vector&lt;A&gt; &gt;; _Compare = __gnu_cxx::__ops::_Iter_less_iter]&#x27;
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">11</span>/opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/bits/stl_algo.h:4842:18:   required from &#x27;constexpr void std::sort(_RAIter, _RAIter) [with _RAIter = __gnu_cxx::__normal_iterator&lt;A*, std::vector&lt;A&gt; &gt;]&#x27;
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">12</span>&lt;source&gt;:10:14:   required from here
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">13</span>/opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/bits/predefined_ops.h:45:23: error: no match for &#x27;operator&lt;&#x27; (operand types are &#x27;A&#x27; and &#x27;A&#x27;)
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">14</span>   45 |       { return *__it1 &lt; *__it2; }
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">15</span>      |                ~~~~~~~^~~~~~~~
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">16</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">17</span>剩下还有80多行</code></pre><p>公允地说，C++<!-- --> <!-- -->的模板设计也带来了一些好处。虽然从理论上来说，编译器有一些通用的方法能够得到“特化”所带来的性能提升，但实践上的各种困难<sup><a href="#note-1" id="note-anchor-1">1</a></sup>使得<!-- --> <!-- -->C++<!-- --> <!-- -->模板在性能上确实有一些优势（这里指的是运行时性能，在编译性能上，C++<!-- --> <!-- -->模板是极其糟糕的）。</p><p>相比语言设计本身，我更不喜欢的是某些<!-- --> <!-- -->C++<!-- --> <!-- -->程序员的无知，以及这种无知带来的傲慢态度。某些人动辄把<!-- --> <!-- -->Java<!-- --> <!-- -->的泛型叫做“假泛型”，认为只有像<!-- --> <!-- -->C++<!-- --> <!-- -->模板一样的泛型实现才是“真泛型”。我真诚地建议，这些人应该认真阅读一下本文。</p><div class="notes"></div></article></div></div><script src="/_next/static/chunks/webpack-4e8d71c3f65c460f.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/c9a5bc6a7c948fb0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/2f71e0d51b6954c9.css\",\"style\"]\n3:HL[\"/_next/static/css/14f639173c0fa12c.css\",\"style\"]\n4:HL[\"/_next/static/css/ad2762ca96cee671.css\",\"style\"]\n5:HL[\"/_next/static/css/ecc949282143a457.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"6:I[89562,[],\"\"]\n8:\"$Sreact.fragment\"\n9:I[65469,[\"747\",\"static/chunks/747-879f06f58d5428f6.js\",\"90\",\"static/chunks/90-e6624b714e201f6f.js\",\"469\",\"static/chunks/469-7ee2e4c850f58403.js\",\"77\",\"static/chunks/77-c317134e9c0b89a6.js\",\"827\",\"static/chunks/app/%5Blocale%5D/posts/%5Bslug%5D/page-2a39348e7db57b3c.js\"],\"\"]\na:I[39926,[\"747\",\"static/chunks/747-879f06f58d5428f6.js\",\"90\",\"static/chunks/90-e6624b714e201f6f.js\",\"469\",\"static/chunks/469-7ee2e4c850f58403.js\",\"77\",\"static/chunks/77-c317134e9c0b89a6.js\",\"827\",\"static/chunks/app/%5Blocale%5D/posts/%5Bslug%5D/page-2a39348e7db57b3c.js\"],\"default\"]\n14:I[27377,[\"747\",\"static/chunks/747-879f06f58d5428f6.js\",\"90\",\"static/chunks/90-e6624b714e201f6f.js\",\"469\",\"static/chunks/469-7ee2e4c850f58403.js\",\"77\",\"static/chunks/77-c317134e9c0b89a6.js\",\"827\",\"static/chunks/app/%5Blocale%5D/posts/%5Bslug%5D/page-2a39348e7db57b3c.js\"],\"default\"]\n15:I[78703,[],\"\"]\n18:I[53751,[],\"\"]\n19:I[59576,[\"747\",\"static/chunks/747-879f06f58d5428f6.js\",\"90\",\"static/chunks/90-e6624b714e201f6f.js\",\"469\",\"static/chunks/469-7ee2e4c850f58403.js\",\"944\",\"static/chunks/944-9bb2cecf6cff7ac4.js\",\"912\",\"static/chunks/912-713feb4e15afe337.js\",\"203\",\"static/chunks/app/%5Blocale%5D/layout-d7b4eb7e7410d18b.js\"],\"Providers\"]\n1c:I[51395,[],\"\"]\nb:T6d6,\u003cspan class=\"katex-display\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003eα\u003c/mi\u003e\u003cmo\u003e→\u003c/mo\u003e\u003cmi\u003eβ\u003c/mi\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003eα\u003c/mi\u003e\u003cmtext\u003e list\u003c/mtext\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e→\u003c/mo\u003e\u003cmi\u003eβ\u003c/mi\u003e\u003cmtext\u003e list\u003c/mtext\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\n(α → β , α\\ \\text{list}) → β \\ \\text{list}\n\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.0037em;\"\u003eα\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan "])</script><script>self.__next_f.push([1,"class=\"mrel\"\u003e→\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05278em;\"\u003eβ\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.1667em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.0037em;\"\u003eα\u003c/span\u003e\u003cspan class=\"mspace\"\u003e \u003c/span\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003elist\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e→\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05278em;\"\u003eβ\u003c/span\u003e\u003cspan class=\"mspace\"\u003e \u003c/span\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003elist\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003ec:T4b1,\u003cspan class=\"katex-display\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi mathvariant=\"normal\"\u003eΛ\u003c/mi\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmi mathvariant=\"normal\"\u003e.\u003c/mi\u003e\u003cmi\u003eλ\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmo\u003e:\u003c/mo\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmi mathvariant=\"normal\"\u003e.\u003c/mi\u003e\u003cmi\u003ex\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\nΛt.λ (x:t).x\n\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003eΛ\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003et\u003c/span\u003e\u003cspan class=\"mord\"\u003e.\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eλ\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e:\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003et\u003c/"])</script><script>self.__next_f.push([1,"span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mord\"\u003e.\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003ed:Tfc1,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"katex-display\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"\u003e\u003csemantics\u003e\u003cmtable rowspacing=\"0.25em\" columnalign=\"right left\" columnspacing=\"0em\"\u003e\u003cmtr\u003e\u003cmtd\u003e\u003cmstyle scriptlevel=\"0\" displaystyle=\"true\"\u003e\u003cmrow\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi mathvariant=\"normal\"\u003eΛ\u003c/mi\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmi mathvariant=\"normal\"\u003e.\u003c/mi\u003e\u003cmi\u003eλ\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmo\u003e:\u003c/mo\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmi mathvariant=\"normal\"\u003e.\u003c/mi\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmtext\u003eInt\u003c/mtext\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/mrow\u003e\u003c/mstyle\u003e\u003c/mtd\u003e\u003cmtd\u003e\u003cmstyle scriptlevel=\"0\" displaystyle=\"true\"\u003e\u003cmrow\u003e\u003cmrow\u003e\u003c/mrow\u003e\u003cmo\u003e⇒\u003c/mo\u003e\u003c/mrow\u003e\u003c/mstyle\u003e\u003c/mtd\u003e\u003c/mtr\u003e\u003cmtr\u003e\u003cmtd\u003e\u003cmstyle scriptlevel=\"0\" displaystyle=\"true\"\u003e\u003cmrow\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003eλ\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmo\u003e:\u003c/mo\u003e\u003cmtext\u003eInt\u003c/mtext\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmi mathvariant=\"normal\"\u003e.\u003c/mi\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/mrow\u003e\u003c/mstyle\u003e\u003c/mtd\u003e\u003cmtd\u003e\u003cmstyle scriptlevel=\"0\" displaystyle=\"true\"\u003e\u003cmrow\u003e\u003cmrow\u003e\u003c/mrow\u003e\u003cmo\u003e⇒\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/mrow\u003e\u003c/mstyle\u003e\u003c/mtd\u003e\u003c/mtr\u003e\u003c/mtable\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\n\\begin{aligned}\n((Λ t. λ (x:t). x) \\text{Int})1 \u0026amp; \\Rightarrow \\\\\n(λ (x:\\text{Int}). x) 1 \u0026amp; \\Rightarrow 1\n\\end{aligned}\n\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:3em;vertical-align:-1.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mtable\"\u003e\u003cspan class=\"col-align-r\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:1.75em;\"\u003e\u003cspan style=\"top:-3.91em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mopen\"\u003e((\u003c/span\u003e\u003cspan class=\"mord\"\u003eΛ\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003et\u003c/span\u003e\u003cspan class=\"mord\"\u003e.\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eλ\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e:\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003et\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mord\"\u003e.\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003eInt\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-2.41em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eλ\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e:\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003eInt\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mord\"\u003e.\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:1.25em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"col-align-l\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:1.75em;\"\u003e\u003cspan style=\"top:-3.91em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e⇒\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-2.41em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e⇒\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:1.25em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e"])</script><script>self.__next_f.push([1,"e:T1a45,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"katex-display\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmfrac\u003e\u003cmrow\u003e\u003cmi mathvariant=\"normal\"\u003eΓ\u003c/mi\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmo\u003e:\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/msub\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e⊢\u003c/mo\u003e\u003cmi\u003ey\u003c/mi\u003e\u003cmo\u003e:\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cmrow\u003e\u003cmi mathvariant=\"normal\"\u003eΓ\u003c/mi\u003e\u003cmo\u003e⊢\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003eλ\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmo\u003e:\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/msub\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmi mathvariant=\"normal\"\u003e.\u003c/mi\u003e\u003cmi\u003ey\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e:\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/msub\u003e\u003cmo\u003e→\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003c/mfrac\u003e\u003cmrow\u003e\u003c/mrow\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\n  {\\frac{Γ , (x:t_1) ⊢ y:t_2}{Γ ⊢ (λ(x:t_1).y):t_1 → t_2}}_{}\n  \u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:2.4127em;vertical-align:-0.9857em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mopen nulldelimiter\"\u003e\u003c/span\u003e\u003cspan class=\"mfrac\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:1.427em;\"\u003e\u003cspan style=\"top:-2.314em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003eΓ\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e⊢\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eλ\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e:\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003et\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3011em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mord\"\u003e.\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03588em;\"\u003ey\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e:\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003et\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3011em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e→\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003et\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3011em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.23em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"frac-line\" style=\"border-bottom-width:0.04em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.677em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003eΓ\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.1667em;\"\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e:\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003et\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3011em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e⊢\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03588em;\"\u003ey\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e:\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003et\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3011em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.936em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose nulldelimiter\"\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:-0.9857em;\"\u003e\u003cspan style=\"top:-1.0143em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.9857em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e"])</script><script>self.__next_f.push([1,"f:T107e,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"katex-display\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmfrac\u003e\u003cmrow\u003e\u003cmi mathvariant=\"normal\"\u003eΓ\u003c/mi\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmo\u003e:\u003c/mo\u003e\u003cmrow\u003e\u003cmi mathvariant=\"bold\"\u003et\u003c/mi\u003e\u003cmi mathvariant=\"bold\"\u003ey\u003c/mi\u003e\u003cmi mathvariant=\"bold\"\u003ep\u003c/mi\u003e\u003cmi mathvariant=\"bold\"\u003ee\u003c/mi\u003e\u003c/mrow\u003e\u003cmo\u003e⊢\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmo\u003e:\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cmrow\u003e\u003cmi mathvariant=\"normal\"\u003eΓ\u003c/mi\u003e\u003cmo\u003e⊢\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi mathvariant=\"normal\"\u003eΛ\u003c/mi\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmi mathvariant=\"normal\"\u003e.\u003c/mi\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e:\u003c/mo\u003e\u003cmi mathvariant=\"normal\"\u003e∀\u003c/mi\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmi mathvariant=\"normal\"\u003e.\u003c/mi\u003e\u003cmsub\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003c/mfrac\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\n  \\frac{Γ , A:\\bold{type} ⊢ x:t_1 }{ Γ ⊢ (Λ A.x): ∀ A. t_1}\n  \u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:2.3074em;vertical-align:-0.936em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mopen nulldelimiter\"\u003e\u003c/span\u003e\u003cspan class=\"mfrac\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:1.3714em;\"\u003e\u003cspan style=\"top:-2.314em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003eΓ\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e⊢\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord\"\u003eΛ\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"mord\"\u003e.\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e:\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e∀\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"mord\"\u003e.\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003et\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3011em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.23em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"frac-line\" style=\"border-bottom-width:0.04em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.677em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003eΓ\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.1667em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e:\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathbf\"\u003etype\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e⊢\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e:\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003et\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3011em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.936em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose nulldelimiter\"\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e"])</script><script>self.__next_f.push([1,"10:T1491,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"katex-display\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmfrac\u003e\u003cmrow\u003e\u003cmi mathvariant=\"normal\"\u003eΓ\u003c/mi\u003e\u003cmo\u003e⊢\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmo\u003e:\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/msub\u003e\u003cmo\u003e→\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/msub\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003ey\u003c/mi\u003e\u003cmo\u003e:\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cmrow\u003e\u003cmi mathvariant=\"normal\"\u003eΓ\u003c/mi\u003e\u003cmo\u003e⊢\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmi\u003ey\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e:\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003c/mfrac\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\n  \\frac{Γ ⊢ x:(t_1 → t_2), y:t_1}{Γ ⊢ (x\\ y): t_2}\n  \u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:2.363em;vertical-align:-0.936em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mopen nulldelimiter\"\u003e\u003c/span\u003e\u003cspan class=\"mfrac\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:1.427em;\"\u003e\u003cspan style=\"top:-2.314em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003eΓ\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e⊢\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mspace\"\u003e \u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03588em;\"\u003ey\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e:\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003et\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3011em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.23em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"frac-line\" style=\"border-bottom-width:0.04em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.677em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003eΓ\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e⊢\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e:\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003et\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3011em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e→\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003et\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3011em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.1667em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03588em;\"\u003ey\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e:\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003et\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3011em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.936em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose nulldelimiter\"\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e"])</script><script>self.__next_f.push([1,"11:T12a1,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"katex-display\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmfrac\u003e\u003cmrow\u003e\u003cmi mathvariant=\"normal\"\u003eΓ\u003c/mi\u003e\u003cmo\u003e⊢\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmo\u003e:\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi mathvariant=\"normal\"\u003e∀\u003c/mi\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmi mathvariant=\"normal\"\u003e.\u003c/mi\u003e\u003cmsub\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/msub\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmtext\u003e    \u003c/mtext\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003eB\u003c/mi\u003e\u003cmo\u003e:\u003c/mo\u003e\u003cmrow\u003e\u003cmi mathvariant=\"bold\"\u003et\u003c/mi\u003e\u003cmi mathvariant=\"bold\"\u003ey\u003c/mi\u003e\u003cmi mathvariant=\"bold\"\u003ep\u003c/mi\u003e\u003cmi mathvariant=\"bold\"\u003ee\u003c/mi\u003e\u003c/mrow\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cmrow\u003e\u003cmi mathvariant=\"normal\"\u003eΓ\u003c/mi\u003e\u003cmo\u003e⊢\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmi\u003eB\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e:\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e[\u003c/mo\u003e\u003cmi\u003eB\u003c/mi\u003e\u003cmi mathvariant=\"normal\"\u003e/\u003c/mi\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e]\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003c/mfrac\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\n  \\frac{Γ ⊢ x:(∀A.t_1)\\  \\ \\ \\ (B:\\bold{type})}{ Γ ⊢ (x\\ B):[B/A]t_1}\n  \u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:2.363em;vertical-align:-0.936em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mopen nulldelimiter\"\u003e\u003c/span\u003e\u003cspan class=\"mfrac\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:1.427em;\"\u003e\u003cspan style=\"top:-2.314em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003eΓ\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e⊢\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mspace\"\u003e \u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05017em;\"\u003eB\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e:\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e[\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05017em;\"\u003eB\u003c/span\u003e\u003cspan class=\"mord\"\u003e/\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"mclose\"\u003e]\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003et\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3011em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.23em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"frac-line\" style=\"border-bottom-width:0.04em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.677em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003eΓ\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e⊢\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ex\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e:\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord\"\u003e∀\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"mord\"\u003e.\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003et\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3011em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\"\u003e \u003c/span\u003e\u003cspan class=\"mspace\"\u003e \u003c/span\u003e\u003cspan class=\"mspace\"\u003e \u003c/span\u003e\u003cspan class=\"mspace\"\u003e \u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05017em;\"\u003eB\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e:\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathbf\"\u003etype\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.936em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose nulldelimiter\"\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e"])</script><script>self.__next_f.push([1,"12:Taa8,"])</script><script>self.__next_f.push([1,"source\u003e: In function 'int main()':\n\u003csource\u003e:17:8: error: no matching function for call to 'max(A, A)'\n   17 |     max(A(), A());\n      |     ~~~^~~~~~~~~~\n\u003csource\u003e:6:6: note: candidate: 'template\u003cclass T\u003e  requires  equality_comparable\u003cT\u003e bool max(T, T)'\n    6 | bool max(T x, T y) {\n      |      ^~~\n\u003csource\u003e:6:6: note:   template argument deduction/substitution failed:\n\u003csource\u003e:6:6: note: constraints not satisfied\nIn file included from /opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/compare:39,\n                 from /opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/bits/stl_pair.h:65,\n                 from /opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/bits/stl_algobase.h:64,\n                 from /opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/bits/char_traits.h:39,\n                 from /opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/ios:40,\n                 from /opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/ostream:38,\n                 from /opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/iostream:39,\n                 from \u003csource\u003e:1:\n/opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/concepts: In substitution of 'template\u003cclass T\u003e  requires  equality_comparable\u003cT\u003e bool max(T, T) [with T = A]':\n\u003csource\u003e:17:8:   required from here\n/opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/concepts:280:15:   required for the satisfaction of '__weakly_eq_cmp_with\u003c_Tp, _Tp\u003e' [with _Tp = A]\n/opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/concepts:290:13:   required for the satisfaction of 'equality_comparable\u003cT\u003e' [with T = A]\n/opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/concepts:281:4:   in requirements with 'std::remove_reference_t\u003c_Tp\u003e\u0026 __t', 'std::remove_reference_t\u003c_Up\u003e\u0026 __u' [with _Up = A; _Tp = A]\n/opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/concepts:282:17: note: the required expression '(__t == __u)' is invalid\n  282 |           { __t == __u } -\u003e __boolean_testable;\n      |             ~~~~^~~~~~\n/opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/concepts:283:17: note: the required expression '(__t != __u)' is invalid\n  283 |           { __t != __u } -\u003e __boolean_testable;\n      |             ~~~~^~~~~~\n/opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/concepts:284:17: note: the required expression '(__u == __t)' is invalid\n  284 |           { __u == __t } -\u003e __boolean_testable;\n      |             ~~~~^~~~~~\n/opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/concepts:285:17: note: the required expression '(__u != __t)' is invalid\n  285 |           { __u != __t } -\u003e __boolean_testable;\n      |             ~~~~^~~~~~\ncc1plus: note: set '-fconcepts-diagnostics-depth=' to at least 2 for more detail\nCompiler returned: 1"])</script><script>self.__next_f.push([1,"13:T8c7,"])</script><script>self.__next_f.push([1,"n file included from /opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/bits/stl_algobase.h:71,\n                 from /opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/bits/char_traits.h:39,\n                 from /opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/ios:40,\n                 from /opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/ostream:38,\n                 from /opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/iostream:39,\n                 from \u003csource\u003e:1:\n/opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/bits/predefined_ops.h: In instantiation of 'constexpr bool __gnu_cxx::__ops::_Iter_less_iter::operator()(_Iterator1, _Iterator2) const [with _Iterator1 = __gnu_cxx::__normal_iterator\u003cA*, std::vector\u003cA\u003e \u003e; _Iterator2 = __gnu_cxx::__normal_iterator\u003cA*, std::vector\u003cA\u003e \u003e]':\n/opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/bits/stl_algo.h:1826:14:   required from 'constexpr void std::__insertion_sort(_RandomAccessIterator, _RandomAccessIterator, _Compare) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator\u003cA*, std::vector\u003cA\u003e \u003e; _Compare = __gnu_cxx::__ops::_Iter_less_iter]'\n/opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/bits/stl_algo.h:1866:25:   required from 'constexpr void std::__final_insertion_sort(_RandomAccessIterator, _RandomAccessIterator, _Compare) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator\u003cA*, std::vector\u003cA\u003e \u003e; _Compare = __gnu_cxx::__ops::_Iter_less_iter]'\n/opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/bits/stl_algo.h:1957:31:   required from 'constexpr void std::__sort(_RandomAccessIterator, _RandomAccessIterator, _Compare) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator\u003cA*, std::vector\u003cA\u003e \u003e; _Compare = __gnu_cxx::__ops::_Iter_less_iter]'\n/opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/bits/stl_algo.h:4842:18:   required from 'constexpr void std::sort(_RAIter, _RAIter) [with _RAIter = __gnu_cxx::__normal_iterator\u003cA*, std::vector\u003cA\u003e \u003e]'\n\u003csource\u003e:10:14:   required from here\n/opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/bits/predefined_ops.h:45:23: error: no match for 'operator\u003c' (operand types are 'A' and 'A')\n   45 |       { return *__it1 \u003c *__it2; }\n      |                ~~~~~~~^~~~~~~~\n\n剩下还有80多行"])</script><script>self.__next_f.push([1,"16:[\"locale\",\"zh-cn\",\"d\"]\n17:[\"slug\",\"parametric-poly\",\"d\"]\n1d:[]\n"])</script><script>self.__next_f.push([1,"0:[null,[\"$\",\"$L6\",null,{\"buildId\":\"gJYO638A-HRWj2mj-yqBH\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/zh-cn/posts/parametric-poly\",\"initialTree\":[\"\",{\"children\":[[\"locale\",\"zh-cn\",\"d\"],{\"children\":[\"posts\",{\"children\":[[\"slug\",\"parametric-poly\",\"d\"],{\"children\":[\"__PAGE__?{\\\"locale\\\":\\\"zh-cn\\\",\\\"slug\\\":\\\"parametric-poly\\\"}\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[[\"locale\",\"zh-cn\",\"d\"],{\"children\":[\"posts\",{\"children\":[[\"slug\",\"parametric-poly\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L7\",[\"$\",\"article\",null,{\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-4xl font-bold mb-2\",\"children\":\"C++ 模板与参数多态的根本区别\"}],[\"$\",\"div\",null,{\"className\":\"text-sm text-gray-500 mb-5\",\"children\":\"9/14/2021\"}],[\"$\",\"$8\",\"0\",{\"children\":[[\"$\",\"div\",null,{\"className\":\"toc\",\"id\":\"toc\",\"children\":[[\"$\",\"ul\",\"0\",{\"children\":[[\"$\",\"li\",\"0\",{\"children\":[[\"$\",\"a\",\"0\",{\"href\":\"#c-模板与参数多态\",\"id\":\"toc-c-模板与参数多态\",\"children\":[\"C++\",\" \",\"模板与参数多态\"]}]]}],[\"$\",\"li\",\"1\",{\"children\":[[\"$\",\"a\",\"0\",{\"href\":\"#到底什么是参数多态\",\"id\":\"toc-到底什么是参数多态\",\"children\":[\"到底什么是参数多态\"]}]]}],[\"$\",\"li\",\"2\",{\"children\":[[\"$\",\"a\",\"0\",{\"href\":\"#c模板满足命题1.吗\",\"id\":\"toc-c模板满足命题1.吗\",\"children\":[\"C++模板满足命题1.吗？\"]}]]}],[\"$\",\"li\",\"3\",{\"children\":[[\"$\",\"a\",\"0\",{\"href\":\"#类型类影响问题吗\",\"id\":\"toc-类型类影响问题吗\",\"children\":[\"类型类影响问题吗？\"]}]]}],[\"$\",\"li\",\"4\",{\"children\":[[\"$\",\"a\",\"0\",{\"href\":\"#真假泛型性能更好\",\"id\":\"toc-真假泛型性能更好\",\"children\":[\"真假泛型？性能更好？\"]}]]}],[\"$\",\"li\",\"5\",{\"children\":[[\"$\",\"a\",\"0\",{\"href\":\"#concept-能解决问题吗\",\"id\":\"toc-concept-能解决问题吗\",\"children\":[\"Concept:\",\" \",\"能解决问题吗？\"]}]]}]]}]]}],[\"$\",\"h2\",null,{\"className\":\"text-3xl\",\"id\":\"c-模板与参数多态\",\"children\":[[\"$\",\"$L9\",null,{\"href\":\"#c-模板与参数多态\",\"color\":\"secondary\",\"className\":\"pr-3 no-underline hover:underline\",\"children\":\"#\"}],[\"C++\",\" \",\"模板与参数多态\"]]}],[\"$\",\"p\",null,{\"children\":[\"模板(template)是一种\",\" \",\"C++\",\" \",\"语言特性，类似于：\"]}],[\"$\",\"$La\",\"3\",{\"className\":\"cpp\",\"children\":[\"template \u003cclass T\u003e\\nT id(T x) {\\n    return x;\\n}\"]}],[\"$\",\"p\",null,{\"children\":[\"这里的\",\" \",[\"$\",\"code\",\"0\",{\"children\":[\"T\"]}],\" \",\"可以是任意类型。很多人都注意到了这与参数多态(parametric\",\" \",\"polymorphism)的相似性，更有甚者直接把模板机制看作是一种参数多态。比如这份\",[\"$\",\"a\",\"1\",{\"href\":\"https://www.cs.bham.ac.uk/~hxt/2015/c-plus-plus/templates-slides.pdf\",\"children\":[\"ppt\"]}],\"和这个\",[\"$\",\"a\",\"2\",{\"href\":\"https://catonmat.net/cpp-polymorphism\",\"children\":[\"网页\"]}],\"。\"]}],[\"$\",\"p\",null,{\"children\":[\"然而这篇博客中，我将会说明，\",[\"$\",\"strong\",\"0\",{\"children\":[\"无论\",\" \",\"C++\",\" \",\"模板到底是不是一个好的语言特性，它都和参数多态有根本性的区别\"]}],\"。\"]}],[\"$\",\"h2\",null,{\"className\":\"text-3xl\",\"id\":\"到底什么是参数多态\",\"children\":[[\"$\",\"$L9\",null,{\"href\":\"#到底什么是参数多态\",\"color\":\"secondary\",\"className\":\"pr-3 no-underline hover:underline\",\"children\":\"#\"}],[\"到底什么是参数多态\"]]}],[\"$\",\"p\",null,{\"children\":[\"参数多态的历史要追溯一份讲义(\",[\"$\",\"a\",\"0\",{\"href\":\"https://link.springer.com/article/10.1023%2FA%3A1010000313106\",\"children\":[\"Fundamental\",\" \",\"Concepts\",\" \",\"in\",\" \",\"Programming\",\" \",\"Languages\"]}],\")，讲义虽然主要描述的是\",\" \",\"CPL\",\" \",\"语言，但是实际上这一段应该描述的是\",\" \",\"LISP\",\" \",\"的\",\" \",\"MAP\",\" \",\"函数：\"]}],[\"$\",\"blockquote\",\"8\",{\"children\":[[\"$\",\"p\",null,{\"children\":[\"Parametric\",\" \",\"polymorphism\",\" \",\"is\",\" \",\"more\",\" \",\"regular\",\" \",\"and\",\" \",\"may\",\" \",\"be\",\" \",\"illustrated\",\" \",\"by\",\" \",\"an\",\" \",\"example.\",\" \",\"Suppose\",\" \",\"f\",\" \",\"is\",\" \",\"a\",\" \",\"function\",\" \",\"whose\",\" \",\"argument\",\" \",\"is\",\" \",\"of\",\" \",\"type\",\" \",\"α\",\" \",\"and\",\" \",\"whose\",\" \",\"results\",\" \",\"is\",\" \",\"of\",\" \",\"β\",\" \",\"(so\",\" \",\"that\",\" \",\"the\",\" \",\"type\",\" \",\"of\",\" \",\"f\",\" \",\"might\",\" \",\"be\",\" \",\"written\",\" \",\"α\",\" \",\"⇒\",\" \",\"β),\",\" \",\"and\",\" \",\"that\",\" \",\"L\",\" \",\"is\",\" \",\"a\",\" \",\"list\",\" \",\"whose\",\" \",\"elements\",\" \",\"are\",\" \",\"all\",\" \",\"of\",\" \",\"type\",\" \",\"α\",\" \",\"(so\",\" \",\"that\",\" \",\"the\",\" \",\"type\",\" \",\"of\",\" \",\"L\",\" \",\"is\",\" \",\"α\",\" \",\"list).\",\" \",\"We\",\" \",\"can\",\" \",\"imagine\",\" \",\"a\",\" \",\"function,\",\" \",\"say\",\" \",\"Map,\",\" \",\"which\",\" \",\"applies\",\" \",\"f\",\" \",\"in\",\" \",\"turn\",\" \",\"to\",\" \",\"each\",\" \",\"member\",\" \",\"of\",\" \",\"L\",\" \",\"and\",\" \",\"makes\",\" \",\"a\",\" \",\"list\",\" \",\"of\",\" \",\"the\",\" \",\"results.\",\" \",\"Thus\",\" \",\"Map[f,L]\",\" \",\"will\",\" \",\"produce\",\" \",\"a\",\" \",\"β\",\" \",\"list.\",\" \",\"We\",\" \",\"would\",\" \",\"like\",\" \",\"Map\",\" \",\"to\",\" \",\"work\",\" \",\"on\",\" \",\"all\",\" \",\"types\",\" \",\"of\",\" \",\"list\",\" \",\"provided\",\" \",\"f\",\" \",\"was\",\" \",\"a\",\" \",\"suitable\",\" \",\"function,\",\" \",\"so\",\" \",\"that\",\" \",\"Map\",\" \",\"would\",\" \",\"have\",\" \",\"to\",\" \",\"be\",\" \",\"polymorphic.\",\" \",\"However\",\" \",\"its\",\" \",\"polymorphism\",\" \",\"is\",\" \",\"of\",\" \",\"a\",\" \",\"particularly\",\" \",\"simple\",\" \",\"parametric\",\" \",\"type\",\" \",\"which\",\" \",\"could\",\" \",\"be\",\" \",\"written\"]}]]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"overflow-auto\",\"children\":[\"$\",\"div\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"$b\"}}]}]]}],[\"$\",\"p\",null,{\"children\":[\"1975\",\" \",\"年的\",\" \",\"ML\",\" \",\"语言在类型系统的层面上实现了这种多态。在\",\" \",\"ML\",\" \",\"类语言中，一个函数的类型中可以含有类型变量，例如如下的\",[\"$\",\"code\",\"0\",{\"children\":[\"id\"]}],\"函数：\"]}],[\"$\",\"$La\",\"11\",{\"className\":\"ocaml\",\"children\":[\"let id (x:'a) = x\"]}],[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",\"0\",{\"children\":[\"id\"]}],\"函数的类型是\",[\"$\",\"code\",\"1\",{\"children\":[\"'a -\u003e 'a\"]}],\"，其中\",[\"$\",\"code\",\"2\",{\"children\":[\"'a\"]}],\"就是一个类型变量，它可以与\",[\"$\",\"strong\",\"3\",{\"children\":[\"任意\"]}],\"类型相匹配，所以得到\"]}],[\"$\",\"$La\",\"13\",{\"className\":\"ocaml\",\"children\":[\"id 1\\nid \\\"ssdfs\\\"\\nid 1.23\"]}],[\"$\",\"p\",null,{\"children\":[\"都是合法的表达式。ML\",\" \",\"类语言的类型系统可以看作是对\",\" \",\"System\",\" \",\"F\",\" \",\"进行限制和扩展后的系统。System\",\" \",\"F\",\" \",\"可以看作对\",\" \",\"λ\",\" \",\"表达式的扩展，在\",\" \",\"System\",\" \",\"F\",\" \",\"中，λ\",\" \",\"表达式的每个绑定变量都必须给定一个类型，而这个类型则是通过\",\" \",[\"$\",\"span\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath xmlns=\\\"http://www.w3.org/1998/Math/MathML\\\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi mathvariant=\\\"normal\\\"\u003eΛ\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\\\"application/x-tex\\\"\u003eΛ\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\" aria-hidden=\\\"true\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6833em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003eΛ\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\"}}],\"（大写的λ）引入的。\"]}],[\"$\",\"p\",null,{\"children\":[\"具体来说，最基本的λ表达式\",\" \",[\"$\",\"span\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath xmlns=\\\"http://www.w3.org/1998/Math/MathML\\\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eλ\u003c/mi\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmi mathvariant=\\\"normal\\\"\u003e.\u003c/mi\u003e\u003cmi\u003ex\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\\\"application/x-tex\\\"\u003eλx.x\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\" aria-hidden=\\\"true\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6944em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003eλ\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003ex\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003ex\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\"}}],\" \",\"在\",\" \",\"System\",\" \",\"F\",\" \",\"中应该写作：\"]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"overflow-auto\",\"children\":[\"$\",\"div\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"$c\"}}]}]]}],[\"$\",\"p\",null,{\"children\":[\"而这个表达式的类型是\"]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"overflow-auto\",\"children\":[\"$\",\"div\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"katex-display\\\"\u003e\u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath xmlns=\\\"http://www.w3.org/1998/Math/MathML\\\" display=\\\"block\\\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi mathvariant=\\\"normal\\\"\u003e∀\u003c/mi\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmi mathvariant=\\\"normal\\\"\u003e.\u003c/mi\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmo\u003e→\u003c/mo\u003e\u003cmi\u003et\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\\\"application/x-tex\\\"\u003e\\n∀t.t → t\\n\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\" aria-hidden=\\\"true\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6944em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e∀\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003et\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003et\u003c/span\u003e\u003cspan class=\\\"mspace\\\" style=\\\"margin-right:0.2778em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mrel\\\"\u003e→\u003c/span\u003e\u003cspan class=\\\"mspace\\\" style=\\\"margin-right:0.2778em;\\\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6151em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003et\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\"}}]}]]}],[\"$\",\"p\",null,{\"children\":[\"这个大\",\" \",[\"$\",\"span\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath xmlns=\\\"http://www.w3.org/1998/Math/MathML\\\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi mathvariant=\\\"normal\\\"\u003eΛ\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\\\"application/x-tex\\\"\u003eΛ\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\" aria-hidden=\\\"true\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6833em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003eΛ\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\"}}],\" \",\"引入的类型变量在使用时需要得到显式\",\" \",\"apply（就像对小\",\" \",[\"$\",\"span\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath xmlns=\\\"http://www.w3.org/1998/Math/MathML\\\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eλ\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\\\"application/x-tex\\\"\u003eλ\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\" aria-hidden=\\\"true\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6944em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003eλ\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\"}}],\" \",\"的\",\" \",\"apply\",\" \",\"一样）。在\",\" \",\"System\",\" \",\"F\",\" \",\"中，类似于\",\" \",\"λ\",\" \",\"表达式，没有除了\",\" \",[\"$\",\"span\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath xmlns=\\\"http://www.w3.org/1998/Math/MathML\\\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eλ\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\\\"application/x-tex\\\"\u003eλ\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\" aria-hidden=\\\"true\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6944em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003eλ\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\"}}],\"、\",[\"$\",\"span\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath xmlns=\\\"http://www.w3.org/1998/Math/MathML\\\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi mathvariant=\\\"normal\\\"\u003eΛ\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\\\"application/x-tex\\\"\u003eΛ\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\" aria-hidden=\\\"true\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6833em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003eΛ\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\"}}],\" \",\"和\",\" \",[\"$\",\"span\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath xmlns=\\\"http://www.w3.org/1998/Math/MathML\\\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi mathvariant=\\\"normal\\\"\u003e∀\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\\\"application/x-tex\\\"\u003e∀\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\" aria-hidden=\\\"true\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6944em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e∀\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\"}}],\" \",\"以外的东西，如果给它暂时加入整数类型（例如\",[\"$\",\"span\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath xmlns=\\\"http://www.w3.org/1998/Math/MathML\\\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmn\u003e1\u003c/mn\u003e\u003cmo\u003e:\u003c/mo\u003e\u003cmtext\u003eInt\u003c/mtext\u003e\u003c/mrow\u003e\u003cannotation encoding=\\\"application/x-tex\\\"\u003e1: \\\\text{Int}\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\" aria-hidden=\\\"true\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6444em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e1\u003c/span\u003e\u003cspan class=\\\"mspace\\\" style=\\\"margin-right:0.2778em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mrel\\\"\u003e:\u003c/span\u003e\u003cspan class=\\\"mspace\\\" style=\\\"margin-right:0.2778em;\\\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6833em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord text\\\"\u003e\u003cspan class=\\\"mord\\\"\u003eInt\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\"}}],\"），那么就可以给出这样的求值实例:\"]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"overflow-auto\",\"children\":[\"$\",\"div\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"$d\"}}]}]]}],[\"$\",\"p\",null,{\"children\":[\"由于Hindey-Milner类型推理算法的存在，ML类语言中无须手动给出这样的\",\" \",[\"$\",\"span\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath xmlns=\\\"http://www.w3.org/1998/Math/MathML\\\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmtext\u003eInt\u003c/mtext\u003e\u003c/mrow\u003e\u003cannotation encoding=\\\"application/x-tex\\\"\u003e\\\\text{Int}\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\" aria-hidden=\\\"true\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6833em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord text\\\"\u003e\u003cspan class=\\\"mord\\\"\u003eInt\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\"}}],\"，函数的类型也会自动推导为带有全称量词的形式。虽然为了进行推理，某些在\",\" \",\"System\",\" \",\"F\",\" \",\"中合法的式子不能在\",\" \",\"ML\",\" \",\"中被构造，但搞清楚\",\" \",\"System\",\" \",\"F\",\" \",\"的类型规则对接下来的讨论是大有裨益的。\"]}],[\"$\",\"p\",null,{\"children\":[\"System\",\" \",\"F的类型规则分为四个规则：\"]}],[\"$\",\"ol\",\"23\",{\"children\":[[\"$\",\"li\",\"0\",{\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"overflow-auto\",\"children\":[\"$\",\"div\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"$e\"}}]}]]}]]}],[\"$\",\"li\",\"1\",{\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"overflow-auto\",\"children\":[\"$\",\"div\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"$f\"}}]}]]}]]}],[\"$\",\"li\",\"2\",{\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"overflow-auto\",\"children\":[\"$\",\"div\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"$10\"}}]}]]}]]}],[\"$\",\"li\",\"3\",{\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"overflow-auto\",\"children\":[\"$\",\"div\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"$11\"}}]}]]}]]}]]}],[\"$\",\"p\",null,{\"children\":[\"从规则2.中可以看到，这里的\",\" \",[\"$\",\"span\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath xmlns=\\\"http://www.w3.org/1998/Math/MathML\\\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eA\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\\\"application/x-tex\\\"\u003eA\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\" aria-hidden=\\\"true\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6833em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003eA\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\"}}],\" \",\"是\",[\"$\",\"strong\",\"1\",{\"children\":[\"任意\"]}],\"的类型，引入这个\",\" \",[\"$\",\"span\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath xmlns=\\\"http://www.w3.org/1998/Math/MathML\\\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi mathvariant=\\\"normal\\\"\u003eΛ\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\\\"application/x-tex\\\"\u003eΛ\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\" aria-hidden=\\\"true\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6833em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003eΛ\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\"}}],\" \",\"的条件是无论\",\" \",[\"$\",\"span\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath xmlns=\\\"http://www.w3.org/1998/Math/MathML\\\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eA\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\\\"application/x-tex\\\"\u003eA\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\" aria-hidden=\\\"true\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6833em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003eA\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\"}}],\" \",\"到底是什么类型，它都可以推出\",\" \",[\"$\",\"span\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath xmlns=\\\"http://www.w3.org/1998/Math/MathML\\\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ex\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\\\"application/x-tex\\\"\u003ex\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\" aria-hidden=\\\"true\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.4306em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003ex\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\"}}],\" \",\"是\",\" \",[\"$\",\"span\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath xmlns=\\\"http://www.w3.org/1998/Math/MathML\\\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\\\"application/x-tex\\\"\u003et₁\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\" aria-hidden=\\\"true\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.7651em;vertical-align:-0.15em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003et\u003c/span\u003e\u003cspan class=\\\"msupsub\\\"\u003e\u003cspan class=\\\"vlist-t vlist-t2\\\"\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.3011em;\\\"\u003e\u003cspan style=\\\"top:-2.55em;margin-left:0em;margin-right:0.05em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:2.7em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-s\\\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.15em;\\\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\"}}],\" \",\"类型。这样一来，在规则4.中，\",[\"$\",\"span\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath xmlns=\\\"http://www.w3.org/1998/Math/MathML\\\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eB\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\\\"application/x-tex\\\"\u003eB\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\" aria-hidden=\\\"true\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6833em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\" style=\\\"margin-right:0.05017em;\\\"\u003eB\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\"}}],\" \",\"也是一个\",[\"$\",\"strong\",\"7\",{\"children\":[\"任意\"]}],\"的类型。可以不加证明地得到：\"]}],[\"$\",\"blockquote\",\"25\",{\"children\":[[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",\"0\",{\"children\":[\"命题1.\"]}],\" \",\"如果\",\" \",[\"$\",\"span\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath xmlns=\\\"http://www.w3.org/1998/Math/MathML\\\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmo stretchy=\\\"false\\\"\u003e(\u003c/mo\u003e\u003cmi mathvariant=\\\"normal\\\"\u003eΛ\u003c/mi\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmi mathvariant=\\\"normal\\\"\u003e.\u003c/mi\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmo stretchy=\\\"false\\\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\\\"application/x-tex\\\"\u003e(ΛA.x)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\" aria-hidden=\\\"true\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:1em;vertical-align:-0.25em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mopen\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003eΛ\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003eA\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003ex\u003c/span\u003e\u003cspan class=\\\"mclose\\\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\"}}],\" \",\"是一个系统F中的封闭项，那么对于任意的类型\",\" \",[\"$\",\"span\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath xmlns=\\\"http://www.w3.org/1998/Math/MathML\\\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003et\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\\\"application/x-tex\\\"\u003et\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\" aria-hidden=\\\"true\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6151em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003et\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\"}}],\"，\",[\"$\",\"span\",null,{\"data-testid\":\"react-katex\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath xmlns=\\\"http://www.w3.org/1998/Math/MathML\\\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmo stretchy=\\\"false\\\"\u003e(\u003c/mo\u003e\u003cmo stretchy=\\\"false\\\"\u003e(\u003c/mo\u003e\u003cmi mathvariant=\\\"normal\\\"\u003eΛ\u003c/mi\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmi mathvariant=\\\"normal\\\"\u003e.\u003c/mi\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmo stretchy=\\\"false\\\"\u003e)\u003c/mo\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmo stretchy=\\\"false\\\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\\\"application/x-tex\\\"\u003e((ΛA.x)\\\\ t)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\" aria-hidden=\\\"true\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:1em;vertical-align:-0.25em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mopen\\\"\u003e((\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003eΛ\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003eA\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003ex\u003c/span\u003e\u003cspan class=\\\"mclose\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"mspace\\\"\u003e \u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003et\u003c/span\u003e\u003cspan class=\\\"mclose\\\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\"}}],\" \",\"是一个系统F中的封闭项。\"]}]]}],[\"$\",\"p\",null,{\"children\":[\"命题1.是任何声称自己实现了参数多态的系统所必须满足的命题。在ML类语言中，它表现为，一个类型为\",[\"$\",\"code\",\"0\",{\"children\":[\"'a -\u003e b\"]}],\"（这里的\",[\"$\",\"code\",\"1\",{\"children\":[\"b\"]}],\"没有加引号，表示任何可能的类型，比如\",[\"$\",\"code\",\"2\",{\"children\":[\"'a\"]}],\"，这样一来就是\",[\"$\",\"code\",\"3\",{\"children\":[\"'a -\u003e 'a\"]}],\"）的函数\",[\"$\",\"code\",\"4\",{\"children\":[\"f\"]}],\"，对于任何类型为\",[\"$\",\"code\",\"5\",{\"children\":[\"t\"]}],\"的合法ML表达式\",[\"$\",\"code\",\"6\",{\"children\":[\"x\"]}],\"，\",[\"$\",\"code\",\"7\",{\"children\":[\"f x\"]}],\"的类型都是\",[\"$\",\"code\",\"8\",{\"children\":[\"[t/'a]b\"]}],\".\"]}],[\"$\",\"p\",null,{\"children\":[\"例如之前的\",[\"$\",\"code\",\"0\",{\"children\":[\"id\"]}],\"函数，\",[\"$\",\"code\",\"1\",{\"children\":[\"id 10\"]}],\"的类型就是\",[\"$\",\"code\",\"2\",{\"children\":[\"[int/'a]'a\"]}],\"，即\",[\"$\",\"code\",\"3\",{\"children\":[\"int\"]}],\".\"]}],[\"$\",\"p\",null,{\"children\":[\"事实上，参数多态满足更强的条件–parametricity，鉴于比较复杂，这里暂不解释其含义。\"]}],[\"$\",\"h2\",null,{\"className\":\"text-3xl\",\"id\":\"c模板满足命题1.吗\",\"children\":[[\"$\",\"$L9\",null,{\"href\":\"#c模板满足命题1.吗\",\"color\":\"secondary\",\"className\":\"pr-3 no-underline hover:underline\",\"children\":\"#\"}],[\"C++模板满足命题1.吗？\"]]}],[\"$\",\"p\",null,{\"children\":[\"答案是很显然的：\",[\"$\",\"strong\",\"0\",{\"children\":[\"不满足\"]}],\"。这也就是为什么C++模板不是参数多态的一个原因。\"]}],[\"$\",\"p\",null,{\"children\":[\"例如说，\",[\"$\",\"code\",\"0\",{\"children\":[\"id\"]}],\"函数可以写成：\"]}],[\"$\",\"$La\",\"32\",{\"className\":\"cpp\",\"children\":[\"template \u003cclass T\u003e\\nT id(T x) {\\n    return 10;\\n}\"]}],[\"$\",\"p\",null,{\"children\":[\"如果之前没有写过，你可能会惊讶地发现，这竟然是\",[\"$\",\"strong\",\"0\",{\"children\":[\"不会报错\"]}],\"的！事实上，无论怎么写，它都不会报错：\"]}],[\"$\",\"$La\",\"34\",{\"className\":\"cpp\",\"children\":[\"template \u003cclass T\u003e\\nint id(T x) {\\n    return x;\\n}\"]}],[\"$\",\"p\",null,{\"children\":[\"它真正报错的位置，是在对\",[\"$\",\"code\",\"0\",{\"children\":[\"id\"]}],\"函数进行使用的时候：\"]}],[\"$\",\"$La\",\"36\",{\"className\":\"cpp\",\"children\":[\"auto x = id(\\\"sdfsdf\\\");\\n\\n------------------------\\n.\\\\test.cpp:5:10: error: cannot initialize return object of type 'const char *'\\n      with an rvalue of type 'int'\\n  return 10;\\n         ^~\\n.\\\\test.cpp:9:14: note: in instantiation of function template specialization       \\n      'id\u003cconst char *\u003e' requested here\\n    auto y = id(\\\"s\\\");\\n             ^\\n1 error generated.\"]}],[\"$\",\"p\",null,{\"children\":[\"这诉说了一个无情的真相：C++\",\" \",\"编译器不会对模板函数进行类型检查，只会在\",[\"$\",\"strong\",\"0\",{\"children\":[\"特化\"]}],\"的时候进行类型检查。而这使得命题1.无法成立，因为我们根本没有保证在\",[\"$\",\"code\",\"1\",{\"children\":[\"T\"]}],\"是一个类型，\",[\"$\",\"code\",\"2\",{\"children\":[\"x\"]}],\"是\",[\"$\",\"code\",\"3\",{\"children\":[\"T\"]}],\"类型的情况下，可以推出\",[\"$\",\"code\",\"4\",{\"children\":[\"id\"]}],\"函数体（也就是\",[\"$\",\"code\",\"5\",{\"children\":[\"return x\"]}],\"）的类型是\",[\"$\",\"code\",\"6\",{\"children\":[\"T\"]}],\".\"]}],[\"$\",\"p\",null,{\"children\":[\"相反，ocaml\",\" \",\"会无视泛型参数：\"]}],[\"$\",\"$La\",\"39\",{\"className\":\"ocaml\",\"children\":[\"# let id (x: 'a) : int = x ;;\\nval id : int -\u003e int = \u003cfun\u003e\"]}],[\"$\",\"$La\",\"40\",{\"className\":\"ocaml\",\"children\":[\"# let id (x: 'a) : 'a = 10 ;;\\nval id : int -\u003e int = \u003cfun\u003e\"]}],[\"$\",\"p\",null,{\"children\":[\"Haskell\",\" \",\"会报错：\"]}],[\"$\",\"$La\",\"42\",{\"className\":\"haskell\",\"children\":[\"Prelude\u003e :{\\nPrelude| id :: a -\u003e a\\nPrelude| id x = 10\\nPrelude| :}\\n\\n\u003cinteractive\u003e:6:8: error:\\n    • No instance for (Num a) arising from the literal ‘10’\\n      Possible fix:\\n        add (Num a) to the context of\\n          the type signature for:\\n            id :: forall a. a -\u003e a\\n    • In the expression: 10\\n      In an equation for ‘id’: id x = 10\"]}],[\"$\",\"$La\",\"43\",{\"className\":\"haskell\",\"children\":[\"Prelude\u003e :{\\nPrelude| id :: a -\u003e Int\\nPrelude| id x = x\\nPrelude| :}\\n\\n\u003cinteractive\u003e:12:8: error:\\n    • Couldn't match expected type ‘Int’ with actual type ‘a’\\n      ‘a’ is a rigid type variable bound by\\n        the type signature for:\\n          id :: forall a. a -\u003e Int\\n        at \u003cinteractive\u003e:11:1-14\\n    • In the expression: x\\n      In an equation for ‘id’: id x = x\\n    • Relevant bindings include\\n        x :: a (bound at \u003cinteractive\u003e:12:4)\\n        id :: a -\u003e Int (bound at \u003cinteractive\u003e:12:1)\"]}],[\"$\",\"p\",null,{\"children\":[\"可见，C++\",\" \",\"并不是参数多态，它的模板系统和\",\" \",\"ML\",\" \",\"类语言中的泛型系统完全不在一个层次上。\"]}],[\"$\",\"h2\",null,{\"className\":\"text-3xl\",\"id\":\"类型类影响问题吗\",\"children\":[[\"$\",\"$L9\",null,{\"href\":\"#类型类影响问题吗\",\"color\":\"secondary\",\"className\":\"pr-3 no-underline hover:underline\",\"children\":\"#\"}],[\"类型类影响问题吗？\"]]}],[\"$\",\"p\",null,{\"children\":[\"有人可能会说了，Haskell\",\" \",\"的类型类不是也会出现“在使用的时候才报错”这一现象吗？比如说\"]}],[\"$\",\"$La\",\"47\",{\"className\":\"haskell\",\"children\":[\"max :: Ord p =\u003e p -\u003e p -\u003e p\\nmax x y = if y \u003e x then y else x\\n\\ndata X = I | J\\n\\nmax I J -- 这里报错\\n-- error:\\n--    • No instance for (Ord X) arising from a use of ‘max’\\n--    • In the expression: max I J\\n--      In an equation for ‘it’: it = max I J\"]}],[\"$\",\"p\",null,{\"children\":[\"这个错误简单来说，就是自定义类型\",[\"$\",\"code\",\"0\",{\"children\":[\"X\"]}],\"没有实现\",[\"$\",\"code\",\"1\",{\"children\":[\"Ord\"]}],\"类型类，而\",[\"$\",\"code\",\"2\",{\"children\":[\"max\"]}],\"的\",[\"$\",\"strong\",\"3\",{\"children\":[\"类型签名\"]}],\"中需要类型类\",[\"$\",\"code\",\"4\",{\"children\":[\"Ord\"]}],\"，所以报错。这和\",\" \",\"C++\",\" \",\"模板仍然很不一样。根本性的区别是，在对\",[\"$\",\"code\",\"5\",{\"children\":[\"max I J\"]}],\"进行类型检查的时候，只需要\",[\"$\",\"code\",\"6\",{\"children\":[\"max :: Ord p =\u003e p -\u003e p -\u003e p\"]}],\"这一个信息就够了，不需要知道\",[\"$\",\"code\",\"7\",{\"children\":[\"max\"]}],\"的函数体是什么，更不需要“特化”这个函数，这仍是在类型系统中的推导。\"]}],[\"$\",\"h2\",null,{\"className\":\"text-3xl\",\"id\":\"真假泛型性能更好\",\"children\":[[\"$\",\"$L9\",null,{\"href\":\"#真假泛型性能更好\",\"color\":\"secondary\",\"className\":\"pr-3 no-underline hover:underline\",\"children\":\"#\"}],[\"真假泛型？性能更好？\"]]}],[\"$\",\"p\",null,{\"children\":[\"虽然我并不是很喜欢\",\" \",\"Java\",\" \",\"语言，但是\",\" \",\"Java\",\" \",\"语言的泛型系统（在一般情况下）满足命题1.，它是真正的参数多态。这是因为\",\" \",\"Java\",\" \",\"泛型的前身–Generic\",\" \",\"Java（GJ）是由\",\" \",\"Philip\",\" \",\"Wadler\",\" \",\"等真正的编程语言专家设计的。\"]}],[\"$\",\"figure\",\"51\",{\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"img\",\"0\",{\"src\":\"https://homepages.inf.ed.ac.uk/wadler/gj/gj-front-full.jpg\"}]]}]]}],[\"$\",\"p\",null,{\"children\":[\"有人说\",\" \",\"Java\",\" \",\"泛型采用了类型擦除，是“假泛型”，这显然是被c++模板的设计影响了。事实上显然参数多态对应的参数类型更有资格把自己叫做“泛型”。c++才是“假泛型”的例子。\"]}],[\"$\",\"p\",null,{\"children\":[\"c++模板的设计使得\",\" \",\"module\",\" \",\"系统变成了一个困难的问题，到了\",\" \",\"2021\",\" \",\"年，99.9%\",\" \",\"的c++程序仍然在使用上古时代的头文件–这一彻头彻尾的垃圾–模拟\",\" \",\"module\",\" \",\"系统。\"]}],[\"$\",\"p\",null,{\"children\":[\"至于性能，所谓的“特化”在编程语言中有两个更强的概念可以替代。\"]}],[\"$\",\"ul\",\"55\",{\"children\":[[\"$\",\"li\",\"0\",{\"children\":[\"部分求值(partial\",\" \",\"evaluation)\"]}],[\"$\",\"li\",\"1\",{\"children\":[\"内联(inlining)\"]}]]}],[\"$\",\"p\",null,{\"children\":[\"特化可以看作是一个部分求值的例子。F#\",\" \",\"则可以通过字节码反编译回\",\" \",\"C#，在\",[\"$\",\"a\",\"0\",{\"href\":\"https://sharplab.io\",\"children\":[\"sharplab\"]}],\"中，可以发现\"]}],[\"$\",\"$La\",\"57\",{\"className\":\"fsharp\",\"children\":[\"let select x y = x\\n\\nlet select2 (x:int) (y:int) = select x y\"]}],[\"$\",\"p\",null,{\"children\":[\"这样的例子会得到：\"]}],[\"$\",\"$La\",\"59\",{\"className\":\"csharp\",\"children\":[\"using System.Reflection;\\nusing Microsoft.FSharp.Core;\\n\\n[assembly: FSharpInterfaceDataVersion(2, 0, 0)]\\n[assembly: AssemblyVersion(\\\"0.0.0.0\\\")]\\n[CompilationMapping(SourceConstructFlags.Module)]\\npublic static class @_\\n{\\n    [CompilationArgumentCounts(new int[] {\\n        1,\\n        1\\n    })]\\n    public static a select\u003ca, b\u003e(a x, b y)\\n    {\\n        return x;\\n    }\\n\\n    [CompilationArgumentCounts(new int[] {\\n        1,\\n        1\\n    })]\\n    public static int select2(int x, int y)\\n    {\\n        return x;\\n    }\\n}\\nnamespace \u003cStartupCode$_\u003e\\n{\\n    internal static class $_\\n    {\\n    }\\n}\"]}],[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",\"0\",{\"children\":[\"select2\"]}],\"难道不是对\",[\"$\",\"code\",\"1\",{\"children\":[\"select\"]}],\"的“特化”吗？由此看来，C++\",\" \",\"模板的“性能更好”也是很难说清楚的问题。\"]}],[\"$\",\"h2\",null,{\"className\":\"text-3xl\",\"id\":\"concept-能解决问题吗\",\"children\":[[\"$\",\"$L9\",null,{\"href\":\"#concept-能解决问题吗\",\"color\":\"secondary\",\"className\":\"pr-3 no-underline hover:underline\",\"children\":\"#\"}],[\"Concept:\",\" \",\"能解决问题吗？\"]]}],[\"$\",\"p\",null,{\"children\":[\"是否是参数多态，似乎只是一个学术问题。不是参数多态，主要导致的是使用一个参数化类型（parametric\",\" \",\"type，也就是含有∀的类型）时的潜在错误，pararmetricity\",\" \",\"不成立，某些定理（比如\",[\"$\",\"code\",\"0\",{\"children\":[\"map f . map g = map (f . g)\"]}],\"）也不成立。\"]}],[\"$\",\"p\",null,{\"children\":[\"之前已经提到了，Haskell\",\" \",\"也有会出错的问题。其他\",\" \",\"ML\",\" \",\"家族的语言，如果不算上类似\",\" \",\"F#\",\" \",\"的\",\" \",\"object\",\" \",\"系统的扩展，则基本没有出错的问题，但是需要传递更多参数或显式使用模块（module）系统。F#\",\" \",\"的\",\" \",[\"$\",\"code\",\"0\",{\"children\":[\"List.sortWith\"]}],\" \",\"的类型就是\",\" \",[\"$\",\"code\",\"1\",{\"children\":[\"(('a -\u003e 'a -\u003e int) -\u003e 'a list -\u003e 'a list)\"]}],\"，对于任何\",\" \",[\"$\",\"code\",\"2\",{\"children\":[\"'a\"]}],\" \",\"都不会出错，但是需要显式地传递一个\",\" \",\"comparer.\"]}],[\"$\",\"p\",null,{\"children\":[\"所以，不是参数多态，也许也不是特别大的问题。\"]}],[\"$\",\"p\",null,{\"children\":[\"但说到\",\" \",\"C++，不是参数多态确实带来了一个相当严重的问题，那就是模板系统给出的报错信息常常令人无从下手。\"]}],[\"$\",\"p\",null,{\"children\":[\"例如这样的程序：\"]}],[\"$\",\"$La\",\"67\",{\"className\":\"cpp\",\"children\":[\"#include \u003ciostream\u003e\\n#include \u003cvector\u003e\\n#include \u003calgorithm\u003e\\n\\nclass A {};\\n\\nint main() {\\n    std::vector\u003cA\u003e v;\\n    std::sort(v.begin(), v.end());\\n}\"]}],[\"$\",\"p\",null,{\"children\":[\"会产生\",\" \",\"200\",\" \",\"行，19kb\",\" \",\"的报错：\"]}],[\"$\",\"$La\",\"69\",{\"className\":\"text\",\"children\":[\"In file included from .\\\\test.cpp:3:\\nC:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2019\\\\Community\\\\VC\\\\Tools\\\\MSVC\\\\14.28.29910\\\\include\\\\algorithm:7361:32: error: no matching function for call to object of type 'std::less\u003c\u003e'\\n            if (_DEBUG_LT_PRED(_Pred, _Val, *_First)) { // found new earliest element, move to front\\n...\"]}],[\"$\",\"p\",null,{\"children\":[\"为了解决这个问题，C++20\",\" \",\"引入了\",\" \",\"concept，concept\",\" \",\"借鉴了类型类和\",\" \",\"Java\",\" \",\"泛型的设计，可以使得我们能写出类似于之前\",\" \",\"Haskell\",\" \",\"的\",[\"$\",\"code\",\"0\",{\"children\":[\"max\"]}],\"那样的程序：\"]}],[\"$\",\"$La\",\"71\",{\"className\":\"cpp\",\"children\":[\"#include \u003ciostream\u003e\\n#include \u003calgorithm\u003e\\n#include \u003cconcepts\u003e\\n\\ntemplate \u003cclass T\u003e requires std::equality_comparable\u003cT\u003e\\nbool max(T x, T y) {\\n    if (x \u003e y) {\\n        return x;\\n    } else {\\n        return y;\\n    }\\n}\"]}],[\"$\",\"p\",null,{\"children\":[\"如果这时写出：\"]}],[\"$\",\"$La\",\"73\",{\"className\":\"cpp\",\"children\":[\"class A{};\\n\\nint main() {\\n    max(A(), A());\\n}\"]}],[\"$\",\"p\",null,{\"children\":[\"编译器会报错：\"]}],[\"$\",\"$La\",\"75\",{\"className\":\"text\",\"children\":[\"$12\"]}],[\"$\",\"p\",null,{\"children\":[\"这里会直接表明A不满足\",[\"$\",\"code\",\"0\",{\"children\":[\"std::equality_comparable\"]}],\"的约束。虽然如此，噪音还是非常的多。更重要的是，对于库函数–这种我们不想研究源码的函数，效果还是一般：\"]}],[\"$\",\"$La\",\"77\",{\"className\":\"text\",\"children\":[\"$13\"]}],[\"$\",\"p\",null,{\"children\":[\"公允地说，C++\",\" \",\"的模板设计也带来了一些好处。虽然从理论上来说，编译器有一些通用的方法能够得到“特化”所带来的性能提升，但实践上的各种困难\",[\"$\",\"sup\",\"0\",{\"children\":[[\"$\",\"a\",\"0\",{\"href\":\"#note-1\",\"id\":\"note-anchor-1\",\"children\":[\"1\"]}]]}],\"使得\",\" \",\"C++\",\" \",\"模板在性能上确实有一些优势（这里指的是运行时性能，在编译性能上，C++\",\" \",\"模板是极其糟糕的）。\"]}],[\"$\",\"p\",null,{\"children\":[\"相比语言设计本身，我更不喜欢的是某些\",\" \",\"C++\",\" \",\"程序员的无知，以及这种无知带来的傲慢态度。某些人动辄把\",\" \",\"Java\",\" \",\"的泛型叫做“假泛型”，认为只有像\",\" \",\"C++\",\" \",\"模板一样的泛型实现才是“真泛型”。我真诚地建议，这些人应该认真阅读一下本文。\"]}],[\"$\",\"div\",null,{\"className\":\"notes\",\"children\":[[\"$\",\"$L14\",null,{\"itemId\":\"1\",\"id\":\"note-1\",\"children\":[[\"$\",\"p\",null,{\"children\":[\"知乎上有一篇\",[\"$\",\"a\",\"0\",{\"href\":\"https://zhuanlan.zhihu.com/p/456388736\",\"children\":[\"特别好的文章\"]}],\"介绍了\",\" \",\"Haskell\",\" \",\"等语言在这个问题上的尴尬\"]}]]}]]}]]}]]}]],null],null]},[[\"$\",\"div\",null,{\"className\":\" relative w-full px-6 py-12 shadow-xl  shadow-slate-700/20 ring-1 ring-gray-900/5 dark:shadow-slate-300/20 dark:ring-gray-100/5 dark:shadow-slate-900/10 md:max-w-3xl md:mx-auto lg:max-w-4xl lg:pt-16 lg:pb-28 prose prose-natural dark:prose-invert\",\"children\":[\"$\",\"$L15\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$16\",\"children\",\"posts\",\"children\",\"$17\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L18\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/ecc949282143a457.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]}]}],null],null]},[\"$\",\"$L15\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$16\",\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L18\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[[\"$\",\"html\",null,{\"lang\":\"zh-cn\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__className_aaf875 text-foreground bg-background min-h-screen\",\"children\":[\"$\",\"$L19\",null,{\"children\":[\"$L1a\",[\"$\",\"$L15\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$16\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L18\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]]}]}]}],null],null]},[[\"$\",\"$L15\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L18\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/2f71e0d51b6954c9.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/14f639173c0fa12c.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"link\",\"2\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/ad2762ca96cee671.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[false,\"$L1b\"],\"globalErrorComponent\":\"$1c\",\"missingSlots\":\"$W1d\"}]]\n"])</script><script>self.__next_f.push([1,"1e:I[53693,[\"747\",\"static/chunks/747-879f06f58d5428f6.js\",\"90\",\"static/chunks/90-e6624b714e201f6f.js\",\"469\",\"static/chunks/469-7ee2e4c850f58403.js\",\"944\",\"static/chunks/944-9bb2cecf6cff7ac4.js\",\"912\",\"static/chunks/912-713feb4e15afe337.js\",\"203\",\"static/chunks/app/%5Blocale%5D/layout-d7b4eb7e7410d18b.js\"],\"Navbar\"]\n1f:I[53693,[\"747\",\"static/chunks/747-879f06f58d5428f6.js\",\"90\",\"static/chunks/90-e6624b714e201f6f.js\",\"469\",\"static/chunks/469-7ee2e4c850f58403.js\",\"944\",\"static/chunks/944-9bb2cecf6cff7ac4.js\",\"912\",\"static/chunks/912-713feb4e15afe337.js\",\"203\",\"static/chunks/app/%5Blocale%5D/layout-d7b4eb7e7410d18b.js\"],\"NavbarBrand\"]\n21:I[53693,[\"747\",\"static/chunks/747-879f06f58d5428f6.js\",\"90\",\"static/chunks/90-e6624b714e201f6f.js\",\"469\",\"static/chunks/469-7ee2e4c850f58403.js\",\"944\",\"static/chunks/944-9bb2cecf6cff7ac4.js\",\"912\",\"static/chunks/912-713feb4e15afe337.js\",\"203\",\"static/chunks/app/%5Blocale%5D/layout-d7b4eb7e7410d18b.js\"],\"NavbarItem\"]\n24:I[53693,[\"747\",\"static/chunks/747-879f06f58d5428f6.js\",\"90\",\"static/chunks/90-e6624b714e201f6f.js\",\"469\",\"static/chunks/469-7ee2e4c850f58403.js\",\"944\",\"static/chunks/944-9bb2cecf6cff7ac4.js\",\"912\",\"static/chunks/912-713feb4e15afe337.js\",\"203\",\"static/chunks/app/%5Blocale%5D/layout-d7b4eb7e7410d18b.js\"],\"NavbarContent\"]\n25:I[81946,[\"747\",\"static/chunks/747-879f06f58d5428f6.js\",\"90\",\"static/chunks/90-e6624b714e201f6f.js\",\"469\",\"static/chunks/469-7ee2e4c850f58403.js\",\"944\",\"static/chunks/944-9bb2cecf6cff7ac4.js\",\"912\",\"static/chunks/912-713feb4e15afe337.js\",\"203\",\"static/chunks/app/%5Blocale%5D/layout-d7b4eb7e7410d18b.js\"],\"default\"]\n26:I[48125,[\"747\",\"static/chunks/747-879f06f58d5428f6.js\",\"90\",\"static/chunks/90-e6624b714e201f6f.js\",\"469\",\"static/chunks/469-7ee2e4c850f58403.js\",\"944\",\"static/chunks/944-9bb2cecf6cff7ac4.js\",\"912\",\"static/chunks/912-713feb4e15afe337.js\",\"203\",\"static/chunks/app/%5Blocale%5D/layout-d7b4eb7e7410d18b.js\"],\"default\"]\n1a:[\"$\",\"$L1e\",null,{\"shouldHideOnScroll\":true,\"children\":[[\"$\",\"$L1f\",null,{\"className\":\"flex flex-row gap-4\",\"children\":[[\"$\","])</script><script>self.__next_f.push([1,"\"p\",null,{\"className\":\"font-bold text-inherit\",\"children\":\"$L20\"}],[\"$\",\"$L21\",null,{\"children\":\"$L22\"}],[\"$\",\"$L21\",null,{\"children\":\"$L23\"}]]}],[\"$\",\"$L24\",null,{\"justify\":\"end\",\"className\":\"gap-1\",\"children\":[[\"$\",\"$L21\",null,{\"children\":[\"$\",\"$L25\",null,{}]}],[\"$\",\"$L21\",null,{\"children\":[\"$\",\"$L26\",null,{}]}]]}]]}]\n1b:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Aya's Blog\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"A site powered by next.js and pandoc\"}],[\"$\",\"link\",\"4\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"48x48\"}],[\"$\",\"meta\",\"5\",{\"name\":\"next-size-adjust\"}]]\n7:null\n"])</script><script>self.__next_f.push([1,"27:I[9678,[\"747\",\"static/chunks/747-879f06f58d5428f6.js\",\"90\",\"static/chunks/90-e6624b714e201f6f.js\",\"469\",\"static/chunks/469-7ee2e4c850f58403.js\",\"944\",\"static/chunks/944-9bb2cecf6cff7ac4.js\",\"912\",\"static/chunks/912-713feb4e15afe337.js\",\"203\",\"static/chunks/app/%5Blocale%5D/layout-d7b4eb7e7410d18b.js\"],\"default\"]\n20:[\"$\",\"$L27\",null,{\"locale\":\"zh-cn\",\"localePrefix\":\"always\",\"href\":\"/\",\"aria-label\":\"主页\",\"children\":\"主页\"}]\n22:[\"$\",\"$L27\",null,{\"locale\":\"zh-cn\",\"localePrefix\":\"always\",\"href\":\"/blog/\",\"className\":\"font-bold\",\"aria-label\":\"博客\",\"children\":\"博客\"}]\n23:[\"$\",\"$L27\",null,{\"locale\":\"zh-cn\",\"localePrefix\":\"always\",\"href\":\"/favorites/\",\"className\":\"font-bold\",\"aria-label\":\"园地\",\"children\":\"园地\"}]\n"])</script></body></html>