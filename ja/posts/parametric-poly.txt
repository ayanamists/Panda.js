3:I[78703,[],""]
6:I[53751,[],""]
7:I[59576,["706","static/chunks/706-97ed238ee5a03fb5.js","469","static/chunks/469-7ee2e4c850f58403.js","911","static/chunks/911-e9f556f9b03e931c.js","373","static/chunks/373-fbdb9516436dc720.js","203","static/chunks/app/%5Blocale%5D/layout-a565b40c48425316.js"],"Providers"]
4:["locale","ja","d"]
5:["slug","parametric-poly","d"]
0:["2sW6a6iRkprGJFGUfr1-Q",[[["",{"children":[["locale","ja","d"],{"children":["posts",{"children":[["slug","parametric-poly","d"],{"children":["__PAGE__?{\"locale\":\"ja\",\"slug\":\"parametric-poly\"}",{}]}]}]}]},"$undefined","$undefined",true],["",{"children":[["locale","ja","d"],{"children":["posts",{"children":[["slug","parametric-poly","d"],{"children":["__PAGE__",{},[["$L1","$L2"],null],null]},[["$","div",null,{"className":" relative w-full py-12 shadow-xl shadow-slate-700/20 ring-1 ring-gray-900/5 dark:shadow-slate-100/20 dark:ring-gray-100/5 lg:mx-auto lg:max-w-4xl lg:pt-16 lg:pb-28","children":["$","div",null,{"className":"prose prose-natural dark:prose-invert mx-auto max-w-full px-8 sm:px-16 relative","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","$4","children","posts","children","$5","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/97d548e729a05adf.css","precedence":"next","crossOrigin":"$undefined"}]]}]}]}],null],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","$4","children","posts","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},[["$","html",null,{"lang":"ja","suppressHydrationWarning":true,"children":["$","body",null,{"className":"text-foreground bg-background min-h-screen","children":["$","$L7",null,{"children":["$L8",["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]}]}]}],null],null]},[["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/c6bd041446e6519a.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/ad2762ca96cee671.css","precedence":"next","crossOrigin":"$undefined"}]]}],null],null],[null,"$L9"]]]]
a:I[53693,["706","static/chunks/706-97ed238ee5a03fb5.js","469","static/chunks/469-7ee2e4c850f58403.js","911","static/chunks/911-e9f556f9b03e931c.js","373","static/chunks/373-fbdb9516436dc720.js","203","static/chunks/app/%5Blocale%5D/layout-a565b40c48425316.js"],"Navbar"]
b:I[53693,["706","static/chunks/706-97ed238ee5a03fb5.js","469","static/chunks/469-7ee2e4c850f58403.js","911","static/chunks/911-e9f556f9b03e931c.js","373","static/chunks/373-fbdb9516436dc720.js","203","static/chunks/app/%5Blocale%5D/layout-a565b40c48425316.js"],"NavbarBrand"]
d:I[53693,["706","static/chunks/706-97ed238ee5a03fb5.js","469","static/chunks/469-7ee2e4c850f58403.js","911","static/chunks/911-e9f556f9b03e931c.js","373","static/chunks/373-fbdb9516436dc720.js","203","static/chunks/app/%5Blocale%5D/layout-a565b40c48425316.js"],"NavbarItem"]
10:I[53693,["706","static/chunks/706-97ed238ee5a03fb5.js","469","static/chunks/469-7ee2e4c850f58403.js","911","static/chunks/911-e9f556f9b03e931c.js","373","static/chunks/373-fbdb9516436dc720.js","203","static/chunks/app/%5Blocale%5D/layout-a565b40c48425316.js"],"NavbarContent"]
11:I[81946,["706","static/chunks/706-97ed238ee5a03fb5.js","469","static/chunks/469-7ee2e4c850f58403.js","911","static/chunks/911-e9f556f9b03e931c.js","373","static/chunks/373-fbdb9516436dc720.js","203","static/chunks/app/%5Blocale%5D/layout-a565b40c48425316.js"],"default"]
12:I[48125,["706","static/chunks/706-97ed238ee5a03fb5.js","469","static/chunks/469-7ee2e4c850f58403.js","911","static/chunks/911-e9f556f9b03e931c.js","373","static/chunks/373-fbdb9516436dc720.js","203","static/chunks/app/%5Blocale%5D/layout-a565b40c48425316.js"],"default"]
8:["$","$La",null,{"shouldHideOnScroll":true,"children":[["$","$Lb",null,{"className":"flex flex-row gap-4","children":[["$","p",null,{"className":"font-bold text-inherit","children":"$Lc"}],["$","$Ld",null,{"children":"$Le"}],["$","$Ld",null,{"children":"$Lf"}]]}],["$","$L10",null,{"justify":"end","className":"gap-1","children":[["$","$Ld",null,{"children":["$","$L11",null,{}]}],["$","$Ld",null,{"children":["$","$L12",null,{}]}]]}]]}]
9:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Aya's Blog"}],["$","meta","3",{"name":"description","content":"A site powered by next.js and pandoc"}],["$","link","4",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"48x48"}]]
1:null
13:I[9678,["706","static/chunks/706-97ed238ee5a03fb5.js","469","static/chunks/469-7ee2e4c850f58403.js","911","static/chunks/911-e9f556f9b03e931c.js","373","static/chunks/373-fbdb9516436dc720.js","203","static/chunks/app/%5Blocale%5D/layout-a565b40c48425316.js"],"default"]
c:["$","$L13",null,{"locale":"ja","localePrefix":"always","href":"/","aria-label":"ホーム","children":"ホーム"}]
e:["$","$L13",null,{"locale":"ja","localePrefix":"always","href":"/blog/","className":"font-bold","aria-label":"ブログ","children":"ブログ"}]
f:["$","$L13",null,{"locale":"ja","localePrefix":"always","href":"/favorites/","className":"font-bold","aria-label":"心の庭","children":"心の庭"}]
14:"$Sreact.fragment"
15:I[75164,["645","static/chunks/61af6f7f-9cff01d0fc100f98.js","469","static/chunks/469-7ee2e4c850f58403.js","306","static/chunks/306-ef157ce75cbf9e7a.js","827","static/chunks/app/%5Blocale%5D/posts/%5Bslug%5D/page-8ab52a4fba20768e.js"],"default"]
16:I[37006,["645","static/chunks/61af6f7f-9cff01d0fc100f98.js","469","static/chunks/469-7ee2e4c850f58403.js","306","static/chunks/306-ef157ce75cbf9e7a.js","827","static/chunks/app/%5Blocale%5D/posts/%5Bslug%5D/page-8ab52a4fba20768e.js"],"default"]
17:I[65469,["645","static/chunks/61af6f7f-9cff01d0fc100f98.js","469","static/chunks/469-7ee2e4c850f58403.js","306","static/chunks/306-ef157ce75cbf9e7a.js","827","static/chunks/app/%5Blocale%5D/posts/%5Bslug%5D/page-8ab52a4fba20768e.js"],""]
18:I[39926,["645","static/chunks/61af6f7f-9cff01d0fc100f98.js","469","static/chunks/469-7ee2e4c850f58403.js","306","static/chunks/306-ef157ce75cbf9e7a.js","827","static/chunks/app/%5Blocale%5D/posts/%5Bslug%5D/page-8ab52a4fba20768e.js"],"default"]
22:I[27377,["645","static/chunks/61af6f7f-9cff01d0fc100f98.js","469","static/chunks/469-7ee2e4c850f58403.js","306","static/chunks/306-ef157ce75cbf9e7a.js","827","static/chunks/app/%5Blocale%5D/posts/%5Bslug%5D/page-8ab52a4fba20768e.js"],"default"]
19:T6d6,<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><mi>α</mi><mo>→</mo><mi>β</mi><mo separator="true">,</mo><mi>α</mi><mtext> list</mtext><mo stretchy="false">)</mo><mo>→</mo><mi>β</mi><mtext> list</mtext></mrow><annotation encoding="application/x-tex">
(α → β , α\ \text{list}) → β \ \text{list}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mspace"> </span><span class="mord text"><span class="mord">list</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mspace"> </span><span class="mord text"><span class="mord">list</span></span></span></span></span></span>1a:T4b1,<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">Λ</mi><mi>t</mi><mi mathvariant="normal">.</mi><mi>λ</mi><mo stretchy="false">(</mo><mi>x</mi><mo>:</mo><mi>t</mi><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">
Λt.λ (x:t).x
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Λ</span><span class="mord mathnormal">t</span><span class="mord">.</span><span class="mord mathnormal">λ</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mord">.</span><span class="mord mathnormal">x</span></span></span></span></span>1b:T107e,<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi mathvariant="normal">Λ</mi><mi>t</mi><mi mathvariant="normal">.</mi><mi>λ</mi><mo stretchy="false">(</mo><mi>x</mi><mo>:</mo><mi>t</mi><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi><mi>x</mi><mo stretchy="false">)</mo><mtext>Int</mtext><mo stretchy="false">)</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>⇒</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo stretchy="false">(</mo><mi>λ</mi><mo stretchy="false">(</mo><mi>x</mi><mo>:</mo><mtext>Int</mtext><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi><mi>x</mi><mo stretchy="false">)</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>⇒</mo><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">
\begin{aligned}
((Λ t. λ (x:t). x) \text{Int})1 &amp; \Rightarrow \\\\
(λ (x:\text{Int}). x) 1 &amp; \Rightarrow 1
\end{aligned}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.5em;vertical-align:-2em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">((</span><span class="mord">Λ</span><span class="mord mathnormal">t</span><span class="mord">.</span><span class="mord mathnormal">λ</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mord">.</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord text"><span class="mord">Int</span></span><span class="mclose">)</span><span class="mord">1</span></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-1.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathnormal">λ</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">Int</span></span><span class="mclose">)</span><span class="mord">.</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⇒</span></span></span><span style="top:-1.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2em;"><span></span></span></span></span></span></span></span></span></span></span></span>1c:T1a45,<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mfrac><mrow><mi mathvariant="normal">Γ</mi><mo separator="true">,</mo><mo stretchy="false">(</mo><mi>x</mi><mo>:</mo><msub><mi>t</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>⊢</mo><mi>y</mi><mo>:</mo><msub><mi>t</mi><mn>2</mn></msub></mrow><mrow><mi mathvariant="normal">Γ</mi><mo>⊢</mo><mo stretchy="false">(</mo><mi>λ</mi><mo stretchy="false">(</mo><mi>x</mi><mo>:</mo><msub><mi>t</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi><mi>y</mi><mo stretchy="false">)</mo><mo>:</mo><msub><mi>t</mi><mn>1</mn></msub><mo>→</mo><msub><mi>t</mi><mn>2</mn></msub></mrow></mfrac><mrow></mrow></msub></mrow><annotation encoding="application/x-tex">
  {\frac{Γ , (x:t_1) ⊢ y:t_2}{Γ ⊢ (λ(x:t_1).y):t_1 → t_2}}_{}
  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4127em;vertical-align:-0.9857em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">Γ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊢</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord mathnormal">λ</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">Γ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊢</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.9857em;"><span style="top:-1.0143em;margin-right:0.05em;"><span class="pstrut" style="height:2em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9857em;"><span></span></span></span></span></span></span></span></span></span></span>1d:T107e,<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">Γ</mi><mo separator="true">,</mo><mi>A</mi><mo>:</mo><mrow><mi mathvariant="bold">t</mi><mi mathvariant="bold">y</mi><mi mathvariant="bold">p</mi><mi mathvariant="bold">e</mi></mrow><mo>⊢</mo><mi>x</mi><mo>:</mo><msub><mi>t</mi><mn>1</mn></msub></mrow><mrow><mi mathvariant="normal">Γ</mi><mo>⊢</mo><mo stretchy="false">(</mo><mi mathvariant="normal">Λ</mi><mi>A</mi><mi mathvariant="normal">.</mi><mi>x</mi><mo stretchy="false">)</mo><mo>:</mo><mi mathvariant="normal">∀</mi><mi>A</mi><mi mathvariant="normal">.</mi><msub><mi>t</mi><mn>1</mn></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">
  \frac{Γ , A:\bold{type} ⊢ x:t_1 }{ Γ ⊢ (Λ A.x): ∀ A. t_1}
  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.3074em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">Γ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊢</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord">Λ</span><span class="mord mathnormal">A</span><span class="mord">.</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">∀</span><span class="mord mathnormal">A</span><span class="mord">.</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">Γ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathbf">type</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊢</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>1e:T1491,<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">Γ</mi><mo>⊢</mo><mi>x</mi><mo>:</mo><mo stretchy="false">(</mo><msub><mi>t</mi><mn>1</mn></msub><mo>→</mo><msub><mi>t</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>y</mi><mo>:</mo><msub><mi>t</mi><mn>1</mn></msub></mrow><mrow><mi mathvariant="normal">Γ</mi><mo>⊢</mo><mo stretchy="false">(</mo><mi>x</mi><mtext> </mtext><mi>y</mi><mo stretchy="false">)</mo><mo>:</mo><msub><mi>t</mi><mn>2</mn></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">
  \frac{Γ ⊢ x:(t_1 → t_2), y:t_1}{Γ ⊢ (x\ y): t_2}
  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">Γ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊢</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">Γ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊢</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>1f:T12a1,<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">Γ</mi><mo>⊢</mo><mi>x</mi><mo>:</mo><mo stretchy="false">(</mo><mi mathvariant="normal">∀</mi><mi>A</mi><mi mathvariant="normal">.</mi><msub><mi>t</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mtext>    </mtext><mo stretchy="false">(</mo><mi>B</mi><mo>:</mo><mrow><mi mathvariant="bold">t</mi><mi mathvariant="bold">y</mi><mi mathvariant="bold">p</mi><mi mathvariant="bold">e</mi></mrow><mo stretchy="false">)</mo></mrow><mrow><mi mathvariant="normal">Γ</mi><mo>⊢</mo><mo stretchy="false">(</mo><mi>x</mi><mtext> </mtext><mi>B</mi><mo stretchy="false">)</mo><mo>:</mo><mo stretchy="false">[</mo><mi>B</mi><mi mathvariant="normal">/</mi><mi>A</mi><mo stretchy="false">]</mo><msub><mi>t</mi><mn>1</mn></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">
  \frac{Γ ⊢ x:(∀A.t_1)\  \ \ \ (B:\bold{type})}{ Γ ⊢ (x\ B):[B/A]t_1}
  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">Γ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊢</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord">/</span><span class="mord mathnormal">A</span><span class="mclose">]</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">Γ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊢</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord">∀</span><span class="mord mathnormal">A</span><span class="mord">.</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace"> </span><span class="mspace"> </span><span class="mspace"> </span><span class="mspace"> </span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathbf">type</span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>20:Taa8,source>: In function 'int main()':
<source>:17:8: error: no matching function for call to 'max(A, A)'
   17 |     max(A(), A());
      |     ~~~^~~~~~~~~~
<source>:6:6: note: candidate: 'template<class T>  requires  equality_comparable<T> bool max(T, T)'
    6 | bool max(T x, T y) {
      |      ^~~
<source>:6:6: note:   template argument deduction/substitution failed:
<source>:6:6: note: constraints not satisfied
In file included from /opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/compare:39,
                 from /opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/bits/stl_pair.h:65,
                 from /opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/bits/stl_algobase.h:64,
                 from /opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/bits/char_traits.h:39,
                 from /opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/ios:40,
                 from /opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/ostream:38,
                 from /opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/iostream:39,
                 from <source>:1:
/opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/concepts: In substitution of 'template<class T>  requires  equality_comparable<T> bool max(T, T) [with T = A]':
<source>:17:8:   required from here
/opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/concepts:280:15:   required for the satisfaction of '__weakly_eq_cmp_with<_Tp, _Tp>' [with _Tp = A]
/opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/concepts:290:13:   required for the satisfaction of 'equality_comparable<T>' [with T = A]
/opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/concepts:281:4:   in requirements with 'std::remove_reference_t<_Tp>& __t', 'std::remove_reference_t<_Up>& __u' [with _Up = A; _Tp = A]
/opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/concepts:282:17: note: the required expression '(__t == __u)' is invalid
  282 |           { __t == __u } -> __boolean_testable;
      |             ~~~~^~~~~~
/opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/concepts:283:17: note: the required expression '(__t != __u)' is invalid
  283 |           { __t != __u } -> __boolean_testable;
      |             ~~~~^~~~~~
/opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/concepts:284:17: note: the required expression '(__u == __t)' is invalid
  284 |           { __u == __t } -> __boolean_testable;
      |             ~~~~^~~~~~
/opt/compiler-explorer/gcc-11.2.0/include/C++/11.2.0/concepts:285:17: note: the required expression '(__u != __t)' is invalid
  285 |           { __u != __t } -> __boolean_testable;
      |             ~~~~^~~~~~
cc1plus: note: set '-fconcepts-diagnostics-depth=' to at least 2 for more detail
Compiler returned: 121:T8c7,n file included from /opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/bits/stl_algobase.h:71,
                 from /opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/bits/char_traits.h:39,
                 from /opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/ios:40,
                 from /opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/ostream:38,
                 from /opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/iostream:39,
                 from <source>:1:
/opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/bits/predefined_ops.h: In instantiation of 'constexpr bool __gnu_cxx::__ops::_Iter_less_iter::operator()(_Iterator1, _Iterator2) const [with _Iterator1 = __gnu_cxx::__normal_iterator<A*, std::vector<A> >; _Iterator2 = __gnu_cxx::__normal_iterator<A*, std::vector<A> >]':
/opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/bits/stl_algo.h:1826:14:   required from 'constexpr void std::__insertion_sort(_RandomAccessIterator, _RandomAccessIterator, _Compare) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<A*, std::vector<A> >; _Compare = __gnu_cxx::__ops::_Iter_less_iter]'
/opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/bits/stl_algo.h:1866:25:   required from 'constexpr void std::__final_insertion_sort(_RandomAccessIterator, _RandomAccessIterator, _Compare) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<A*, std::vector<A> >; _Compare = __gnu_cxx::__ops::_Iter_less_iter]'
/opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/bits/stl_algo.h:1957:31:   required from 'constexpr void std::__sort(_RandomAccessIterator, _RandomAccessIterator, _Compare) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<A*, std::vector<A> >; _Compare = __gnu_cxx::__ops::_Iter_less_iter]'
/opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/bits/stl_algo.h:4842:18:   required from 'constexpr void std::sort(_RAIter, _RAIter) [with _RAIter = __gnu_cxx::__normal_iterator<A*, std::vector<A> >]'
<source>:10:14:   required from here
/opt/compiler-explorer/gcc-11.2.0/include/c++/11.2.0/bits/predefined_ops.h:45:23: error: no match for 'operator<' (operand types are 'A' and 'A')
   45 |       { return *__it1 < *__it2; }
      |                ~~~~~~~^~~~~~~~

剩下还有80多行2:["$","div",null,{"children":[["$","h1",null,{"className":"text-4xl font-bold mb-2","children":"C++ テンプレートとパラメータ多態性の根本的な違い"}],["$","div",null,{"className":"text-sm text-gray-500 mb-5","children":"9/14/2021"}],["$","$14","0",{"children":[["$","$L15",null,{"children":[["$","ul","0",{"children":[["$","li","0",{"children":[["$","a","0",{"href":"#c-テンプレートとパラメータ多態性","id":"toc-c-テンプレートとパラメータ多態性","children":["C++"," ","テンプレートとパラメータ多態性"]}]]}],["$","li","1",{"children":[["$","a","0",{"href":"#パラメータ多態性とは何か","id":"toc-パラメータ多態性とは何か","children":["パラメータ多態性とは何か"]}]]}],["$","li","2",{"children":[["$","a","0",{"href":"#cテンプレートは命題1.を満たしますか","id":"toc-cテンプレートは命題1.を満たしますか","children":["C++テンプレートは命題1.を満たしますか？"]}]]}],["$","li","3",{"children":[["$","a","0",{"href":"#型クラスは問題に影響しますか","id":"toc-型クラスは問題に影響しますか","children":["型クラスは問題に影響しますか？"]}]]}],["$","li","4",{"children":[["$","a","0",{"href":"#真偽のジェネリックパフォーマンスは良い","id":"toc-真偽のジェネリックパフォーマンスは良い","children":["真偽のジェネリック？パフォーマンスは良い？"]}]]}],["$","li","5",{"children":[["$","a","0",{"href":"#コンセプト問題を解決できますか","id":"toc-コンセプト問題を解決できますか","children":["コンセプト：問題を解決できますか？"]}]]}]]}]]}],["$","article","1",{"children":[["$","$L16",null,{"type":"warning","children":[["$","p",null,{"children":["この記事はChatGPTによって中国語から翻訳されたもので、いくつかの誤りが含まれているかもしれません。不正確な部分があればご了承ください。"]}]]}],["$","h2",null,{"className":"text-3xl","id":"c-テンプレートとパラメータ多態性","children":[["$","$L17",null,{"href":"#c-テンプレートとパラメータ多態性","color":"secondary","className":"pr-3 no-underline hover:underline text-primary font-sans","children":"#"}],["C++"," ","テンプレートとパラメータ多態性"]]}],["$","p",null,{"children":["テンプレート(template)は"," ","C++"," ","言語の特性で、以下のようなものです："]}],["$","$L18","3",{"className":"cpp","children":["template <class T>\nT id(T x) {\n    return x;\n}"]}],["$","p",null,{"children":["ここでの"," ",["$","code","0",{"children":["T"]}]," ","は任意の型を指すことができます。多くの人々はこれがパラメータ多態性(parametric"," ","polymorphism)に似ていることに気づき、さらにはテンプレートメカニズムをパラメータ多態性の一種と直接見なす人もいます。例えば、この",["$","a","1",{"href":"https://www.cs.bham.ac.uk/~hxt/2015/c-plus-plus/templates-slides.pdf","children":["ppt"]}],"やこの",["$","a","2",{"href":"https://catonmat.net/cpp-polymorphism","children":["webページ"]}],"。"]}],["$","p",null,{"children":["しかし、このブログ記事では、",["$","strong","0",{"children":["C++"," ","テンプレートが良い言語特性であるかどうかは別として、それがパラメータ多態性とは根本的に異なること"]}],"を説明します。"]}],["$","h2",null,{"className":"text-3xl","id":"パラメータ多態性とは何か","children":[["$","$L17",null,{"href":"#パラメータ多態性とは何か","color":"secondary","className":"pr-3 no-underline hover:underline text-primary font-sans","children":"#"}],["パラメータ多態性とは何か"]]}],["$","p",null,{"children":["パラメータ多態性の歴史は、講義ノート(",["$","a","0",{"href":"https://link.springer.com/article/10.1023%2FA%3A1010000313106","children":["Fundamental"," ","Concepts"," ","in"," ","Programming"," ","Languages"]}],")に遡る必要があります。この講義ノートは主に"," ","CPL"," ","言語を説明していますが、実際には以下の部分は"," ","LISP"," ","の"," ","MAP"," ","関数を説明しているはずです："]}],["$","blockquote","8",{"children":[["$","p",null,{"children":["パラメータ多態性はより規則的で、例を挙げて説明することができます。f"," ","が型"," ","α"," ","の引数を持ち、結果が"," ","β"," ","の関数（つまり、f"," ","の型は"," ","α"," ","⇒"," ","β"," ","と書くことができます）であり、L"," ","がすべての要素が型"," ","α"," ","のリスト（つまり、L"," ","の型は"," ","α"," ","list）であるとします。f"," ","を順番に"," ","L"," ","の各メンバーに適用し、結果のリストを作る関数、つまり"," ","Map"," ","を想像することができます。したがって、Map[f,L]"," ","は"," ","β"," ","list"," ","を生成します。私たちは"," ","Map"," ","が"," ","f"," ","が適切な関数である限り、すべての型のリストで動作することを望んでいます。したがって、Map"," ","は多態性を持つ必要があります。しかし、その多態性は特に単純なパラメータ型であり、書き方は"]}]]}],["$","div",null,{"children":[["$","div",null,{"className":"overflow-auto","children":["$","div",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"$19"}}]}]]}],["$","p",null,{"children":["1975年のML言語は、このような多態性を型システムのレベルで実現しました。ML系の言語では、関数の型に型変数を含めることができます。例えば、以下の",["$","code","0",{"children":["id"]}],"関数："]}],["$","$L18","11",{"className":"ocaml","children":["let id (x:'a) = x"]}],["$","p",null,{"children":[["$","code","0",{"children":["id"]}],"関数の型は",["$","code","1",{"children":["'a -> 'a"]}],"で、ここでの",["$","code","2",{"children":["'a"]}],"は型変数で、",["$","strong","3",{"children":["任意"]}],"の型にマッチすることができます。そのため、"]}],["$","$L18","13",{"className":"ocaml","children":["id 1\nid \"ssdfs\"\nid 1.23"]}],["$","p",null,{"children":["はすべて合法な式です。ML系の言語の型システムは、System"," ","Fに制約と拡張を加えたものと見ることができます。System"," ","Fはλ式の拡張と見ることができ、System"," ","Fでは、λ式の各束縛変数には型を指定する必要があり、この型は",["$","span",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Λ</mi></mrow><annotation encoding=\"application/x-tex\">Λ</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\">Λ</span></span></span></span>"}}],"（大文字のλ）で導入されます。"]}],["$","p",null,{"children":["具体的には、最も基本的なλ式"," ",["$","span",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>λ</mi><mi>x</mi><mi mathvariant=\"normal\">.</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">λx.x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">λ</span><span class=\"mord mathnormal\">x</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">x</span></span></span></span>"}}]," ","はSystem"," ","Fでは以下のように書くべきです："]}],["$","div",null,{"children":[["$","div",null,{"className":"overflow-auto","children":["$","div",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"$1a"}}]}]]}],["$","p",null,{"children":["そして、この式の型は"]}],["$","div",null,{"children":[["$","div",null,{"className":"overflow-auto","children":["$","div",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi mathvariant=\"normal\">∀</mi><mi>t</mi><mi mathvariant=\"normal\">.</mi><mi>t</mi><mo>→</mo><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">\n∀t.t → t\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathnormal\">t</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">t</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6151em;\"></span><span class=\"mord mathnormal\">t</span></span></span></span></span>"}}]}]]}],["$","p",null,{"children":["となります。この大きな"," ",["$","span",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Λ</mi></mrow><annotation encoding=\"application/x-tex\">Λ</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\">Λ</span></span></span></span>"}}]," ","で導入された型変数は、使用時に明示的なapply（小さな"," ",["$","span",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>λ</mi></mrow><annotation encoding=\"application/x-tex\">λ</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">λ</span></span></span></span>"}}]," ","のapplyと同様）が必要です。System"," ","Fでは、λ式のように、",["$","span",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>λ</mi></mrow><annotation encoding=\"application/x-tex\">λ</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">λ</span></span></span></span>"}}],"、",["$","span",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Λ</mi></mrow><annotation encoding=\"application/x-tex\">Λ</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\">Λ</span></span></span></span>"}}],"、",["$","span",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∀</mi></mrow><annotation encoding=\"application/x-tex\">∀</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord\">∀</span></span></span></span>"}}],"以外のものは存在せず、一時的に整数型（例えば",["$","span",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo>:</mo><mtext>Int</mtext></mrow><annotation encoding=\"application/x-tex\">1: \\text{Int}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord text\"><span class=\"mord\">Int</span></span></span></span></span>"}}],"）を追加すると、以下のような評価例を提供できます："]}],["$","div",null,{"children":[["$","div",null,{"className":"overflow-auto","children":["$","div",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"$1b"}}]}]]}],["$","p",null,{"children":["Hindey-Milner型推論アルゴリズムの存在により、ML系の言語では、このような"," ",["$","span",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mtext>Int</mtext></mrow><annotation encoding=\"application/x-tex\">\\text{Int}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord text\"><span class=\"mord\">Int</span></span></span></span></span>"}}]," ","を手動で提供する必要はありません。関数の型は全称量子を含む形式で自動的に推論されます。推論を行うために、System"," ","Fで合法な式がMLで構築できない場合がありますが、System"," ","Fの型規則を理解することは、今後の議論に大いに役立ちます。"]}],["$","p",null,{"children":["System"," ","Fの型規則は以下の4つの規則に分けられます："]}],["$","ol","23",{"children":[["$","li","0",{"children":[["$","div",null,{"children":[["$","div",null,{"className":"overflow-auto","children":["$","div",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"$1c"}}]}]]}]]}],["$","li","1",{"children":[["$","div",null,{"children":[["$","div",null,{"className":"overflow-auto","children":["$","div",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"$1d"}}]}]]}]]}],["$","li","2",{"children":[["$","div",null,{"children":[["$","div",null,{"className":"overflow-auto","children":["$","div",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"$1e"}}]}]]}]]}],["$","li","3",{"children":[["$","div",null,{"children":[["$","div",null,{"className":"overflow-auto","children":["$","div",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"$1f"}}]}]]}]]}]]}],["$","p",null,{"children":["ルール2.からわかるように、ここでの"," ",["$","span",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span>"}}]," ","は",["$","strong","1",{"children":["任意"]}],"の型で、この"," ",["$","span",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Λ</mi></mrow><annotation encoding=\"application/x-tex\">Λ</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\">Λ</span></span></span></span>"}}]," ","の条件は"," ",["$","span",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span>"}}]," ","がどのような型であっても"," ",["$","span",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span>"}}]," ","が"," ",["$","span",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>t</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">t₁</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7651em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>"}}]," ","型であると推測できることです。これにより、ルール4.では、",["$","span",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span></span>"}}]," ","も",["$","strong","7",{"children":["任意"]}],"の型です。証明なしで次のことが得られます："]}],["$","blockquote","25",{"children":[["$","p",null,{"children":[["$","strong","0",{"children":["命題1."]}]," ","もし"," ",["$","span",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"normal\">Λ</mi><mi>A</mi><mi mathvariant=\"normal\">.</mi><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(ΛA.x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">Λ</span><span class=\"mord mathnormal\">A</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span>"}}]," ","がシステムFの閉じた項であるなら、任意の型"," ",["$","span",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6151em;\"></span><span class=\"mord mathnormal\">t</span></span></span></span>"}}]," ","に対して、",["$","span",null,{"data-testid":"react-katex","dangerouslySetInnerHTML":{"__html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mo stretchy=\"false\">(</mo><mi mathvariant=\"normal\">Λ</mi><mi>A</mi><mi mathvariant=\"normal\">.</mi><mi>x</mi><mo stretchy=\"false\">)</mo><mtext> </mtext><mi>t</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">((ΛA.x)\\ t)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">((</span><span class=\"mord\">Λ</span><span class=\"mord mathnormal\">A</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\"> </span><span class=\"mord mathnormal\">t</span><span class=\"mclose\">)</span></span></span></span>"}}]," ","はシステムFの閉じた項である。"]}]]}],["$","p",null,{"children":["命題1.は、パラメータ多態性を実装したと主張する任意のシステムが満たすべき命題です。ML系の言語では、これは型が",["$","code","0",{"children":["'a -> b"]}],"（ここでの",["$","code","1",{"children":["b"]}],"は引用符がなく、任意の可能な型、例えば",["$","code","2",{"children":["'a"]}],"を表し、結果として",["$","code","3",{"children":["'a -> 'a"]}],"になる）の関数",["$","code","4",{"children":["f"]}],"に対して、型が",["$","code","5",{"children":["t"]}],"の任意の合法なML式",["$","code","6",{"children":["x"]}],"に対して、",["$","code","7",{"children":["f x"]}],"の型は",["$","code","8",{"children":["[t/'a]b"]}],"であるという形で表現されます。"]}],["$","p",null,{"children":["例えば、以前の",["$","code","0",{"children":["id"]}],"関数では、",["$","code","1",{"children":["id 10"]}],"の型は",["$","code","2",{"children":["[int/'a]'a"]}],"、つまり",["$","code","3",{"children":["int"]}],"です。"]}],["$","p",null,{"children":["実際、パラメータ多態性はより強い条件、つまりパラメトリシティを満たしますが、これは比較的複雑なので、ここではその意味を説明しません。"]}],["$","h2",null,{"className":"text-3xl","id":"cテンプレートは命題1.を満たしますか","children":[["$","$L17",null,{"href":"#cテンプレートは命題1.を満たしますか","color":"secondary","className":"pr-3 no-underline hover:underline text-primary font-sans","children":"#"}],["C++テンプレートは命題1.を満たしますか？"]]}],["$","p",null,{"children":["答えは明らかに：",["$","strong","0",{"children":["満たしません"]}],"。これがC++テンプレートがパラメータ多態性でない一つの理由です。"]}],["$","p",null,{"children":["例えば、",["$","code","0",{"children":["id"]}],"関数は次のように書くことができます："]}],["$","$L18","32",{"className":"cpp","children":["template <class T>\nT id(T x) {\n    return 10;\n}"]}],["$","p",null,{"children":["もし前に書いていなければ、これが",["$","strong","0",{"children":["エラーにならない"]}],"ことに驚くかもしれません！実際、どのように書いてもエラーになりません："]}],["$","$L18","34",{"className":"cpp","children":["template <class T>\nint id(T x) {\n    return x;\n}"]}],["$","p",null,{"children":["実際にエラーになるのは、",["$","code","0",{"children":["id"]}],"関数を使用するときです："]}],["$","$L18","36",{"className":"cpp","children":["auto x = id(\"sdfsdf\");\n\n------------------------\n.\\test.cpp:5:10: error: cannot initialize return object of type 'const char *'\n      with an rvalue of type 'int'\n  return 10;\n         ^~\n.\\test.cpp:9:14: note: in instantiation of function template specialization       \n      'id<const char *>' requested here\n    auto y = id(\"s\");\n             ^\n1 error generated."]}],["$","p",null,{"children":["これは無情な真実を告げています：C++"," ","コンパイラはテンプレート関数の型チェックを行わず、",["$","strong","0",{"children":["特殊化"]}],"の時にのみ型チェックを行います。これにより、命題1.は成り立たず、",["$","code","1",{"children":["T"]}],"が型で、",["$","code","2",{"children":["x"]}],"が",["$","code","3",{"children":["T"]}],"型である場合に、",["$","code","4",{"children":["id"]}],"関数の本体（つまり",["$","code","5",{"children":["return x"]}],"）の型が",["$","code","6",{"children":["T"]}],"であると推測できる保証がないからです。"]}],["$","p",null,{"children":["逆に、ocamlはジェネリックパラメータを無視します："]}],["$","$L18","39",{"className":"ocaml","children":["# let id (x: 'a) : int = x ;;\nval id : int -> int = <fun>"]}],["$","$L18","40",{"className":"ocaml","children":["# let id (x: 'a) : 'a = 10 ;;\nval id : int -> int = <fun>"]}],["$","p",null,{"children":["Haskellはエラーを報告します："]}],["$","$L18","42",{"className":"haskell","children":["Prelude> :{\nPrelude| id :: a -> a\nPrelude| id x = 10\nPrelude| :}\n\n<interactive>:6:8: error:\n    • No instance for (Num a) arising from the literal ‘10’\n      Possible fix:\n        add (Num a) to the context of\n          the type signature for:\n            id :: forall a. a -> a\n    • In the expression: 10\n      In an equation for ‘id’: id x = 10"]}],["$","$L18","43",{"className":"haskell","children":["Prelude> :{\nPrelude| id :: a -> Int\nPrelude| id x = x\nPrelude| :}\n\n<interactive>:12:8: error:\n    • Couldn't match expected type ‘Int’ with actual type ‘a’\n      ‘a’ is a rigid type variable bound by\n        the type signature for:\n          id :: forall a. a -> Int\n        at <interactive>:11:1-14\n    • In the expression: x\n      In an equation for ‘id’: id x = x\n    • Relevant bindings include\n        x :: a (bound at <interactive>:12:4)\n        id :: a -> Int (bound at <interactive>:12:1)"]}],["$","p",null,{"children":["見ての通り、C++はパラメータ多相性ではなく、そのテンプレートシステムはML系言語のジェネリックシステムとは全く異なるレベルにあります。"]}],["$","h2",null,{"className":"text-3xl","id":"型クラスは問題に影響しますか","children":[["$","$L17",null,{"href":"#型クラスは問題に影響しますか","color":"secondary","className":"pr-3 no-underline hover:underline text-primary font-sans","children":"#"}],["型クラスは問題に影響しますか？"]]}],["$","p",null,{"children":["Haskellの型クラスも「使用時にエラーが報告される」という現象が起こるのではないかと言う人もいるかもしれません。例えば、"]}],["$","$L18","47",{"className":"haskell","children":["max :: Ord p => p -> p -> p\nmax x y = if y > x then y else x\n\ndata X = I | J\n\nmax I J -- 这里报错\n-- error:\n--    • No instance for (Ord X) arising from a use of ‘max’\n--    • In the expression: max I J\n--      In an equation for ‘it’: it = max I J"]}],["$","p",null,{"children":["このエラーは、簡単に言えば、カスタム型",["$","code","0",{"children":["X"]}],"が",["$","code","1",{"children":["Ord"]}],"型クラスを実装しておらず、",["$","code","2",{"children":["max"]}],"の",["$","strong","3",{"children":["型シグネチャ"]}],"が型クラス",["$","code","4",{"children":["Ord"]}],"を必要とするため、エラーが発生します。これはC++のテンプレートとは全く異なります。根本的な違いは、",["$","code","5",{"children":["max I J"]}],"の型チェックを行う際には、",["$","code","6",{"children":["max :: Ord p => p -> p -> p"]}],"という情報だけで十分であり、",["$","code","7",{"children":["max"]}],"の関数本体が何であるかを知る必要はなく、ましてやこの関数を「特化」する必要はありません。これは型システム内での推論です。"]}],["$","h2",null,{"className":"text-3xl","id":"真偽のジェネリックパフォーマンスは良い","children":[["$","$L17",null,{"href":"#真偽のジェネリックパフォーマンスは良い","color":"secondary","className":"pr-3 no-underline hover:underline text-primary font-sans","children":"#"}],["真偽のジェネリック？パフォーマンスは良い？"]]}],["$","p",null,{"children":["私はJava言語をあまり好んでいませんが、Java言語のジェネリックシステム（一般的な状況下で）は命題1を満たしており、それは真のパラメータ多相性です。これは、Javaのジェネリックの前身であるGeneric"," ","Java（GJ）が、Philip"," ","Wadlerなどの真のプログラミング言語の専門家によって設計されたからです。"]}],["$","figure","51",{"children":[["$","div",null,{"children":[["$","img","0",{"src":"https://homepages.inf.ed.ac.uk/wadler/gj/gj-front-full.jpg"}]]}]]}],["$","p",null,{"children":["Javaのジェネリックは型消去を採用しており、「偽のジェネリック」であると言う人もいますが、これは明らかにC++のテンプレートの設計に影響を受けています。実際には、パラメータ多相性に対応するパラメータ型が「ジェネリック」と呼ぶ資格があるのは明らかです。C++は「偽のジェネリック」の例です。"]}],["$","p",null,{"children":["C++のテンプレートの設計は、モジュールシステムを困難な問題にしてしまいました。2021年現在、99.9%のC++プログラムは依然として古代のヘッダーファイル–これは完全なゴミ–を使ってモジュールシステムを模倣しています。"]}],["$","p",null,{"children":["パフォーマンスについては、「特化」という概念は、プログラミング言語において2つのより強力な概念に置き換えることができます。"]}],["$","ul","55",{"children":[["$","li","0",{"children":["部分評価（partial"," ","evaluation）"]}],["$","li","1",{"children":["インライン化（inlining）"]}]]}],["$","p",null,{"children":["特化は部分評価の一例と見なすことができます。F#はバイトコードを逆コンパイルしてC#に戻すことができ、",["$","a","0",{"href":"https://sharplab.io","children":["sharplab"]}],"では、"]}],["$","$L18","57",{"className":"fsharp","children":["let select x y = x\n\nlet select2 (x:int) (y:int) = select x y"]}],["$","p",null,{"children":["このような例が次のようになります："]}],["$","$L18","59",{"className":"csharp","children":["using System.Reflection;\nusing Microsoft.FSharp.Core;\n\n[assembly: FSharpInterfaceDataVersion(2, 0, 0)]\n[assembly: AssemblyVersion(\"0.0.0.0\")]\n[CompilationMapping(SourceConstructFlags.Module)]\npublic static class @_\n{\n    [CompilationArgumentCounts(new int[] {\n        1,\n        1\n    })]\n    public static a select<a, b>(a x, b y)\n    {\n        return x;\n    }\n\n    [CompilationArgumentCounts(new int[] {\n        1,\n        1\n    })]\n    public static int select2(int x, int y)\n    {\n        return x;\n    }\n}\nnamespace <StartupCode$_>\n{\n    internal static class $_\n    {\n    }\n}"]}],["$","p",null,{"children":[["$","code","0",{"children":["select2"]}],"は",["$","code","1",{"children":["select"]}],"の「特化」ではないのでしょうか？したがって、C++テンプレートの「パフォーマンスが良い」という主張は明確ではありません。"]}],["$","h2",null,{"className":"text-3xl","id":"コンセプト問題を解決できますか","children":[["$","$L17",null,{"href":"#コンセプト問題を解決できますか","color":"secondary","className":"pr-3 no-underline hover:underline text-primary font-sans","children":"#"}],["コンセプト：問題を解決できますか？"]]}],["$","p",null,{"children":["パラメータ多態性があるかどうかは、学術的な問題のように思えます。パラメータ多態性がないと、主にパラメトリック型（parametric"," ","type、つまり∀を含む型）を使用する際の潜在的なエラーが発生し、パラメトリシティが成り立たないと、一部の定理（例えば",["$","code","0",{"children":["map f . map g = map (f . g)"]}],"）も成り立ちません。"]}],["$","p",null,{"children":["以前にも触れたように、Haskellにもエラーが発生する問題があります。他のML系の言語では、F#のようなオブジェクトシステムの拡張を除けば、基本的にエラーは発生しませんが、より多くのパラメータを渡す必要があったり、モジュール（module）システムを明示的に使用する必要があります。F#の",["$","code","0",{"children":["List.sortWith"]}],"の型は",["$","code","1",{"children":["(('a -> 'a -> int) -> 'a list -> 'a list)"]}],"で、任意の",["$","code","2",{"children":["'a"]}],"に対してエラーは発生しませんが、comparerを明示的に渡す必要があります。"]}],["$","p",null,{"children":["したがって、パラメータ多態性がないということは、それほど大きな問題ではないかもしれません。"]}],["$","p",null,{"children":["しかし、C++について言えば、パラメータ多態性がないことは、テンプレートシステムが出すエラーメッセージが非常に扱いにくいという、かなり深刻な問題を引き起こします。"]}],["$","p",null,{"children":["例えば、次のようなプログラム："]}],["$","$L18","67",{"className":"cpp","children":["#include <iostream>\n#include <vector>\n#include <algorithm>\n\nclass A {};\n\nint main() {\n    std::vector<A> v;\n    std::sort(v.begin(), v.end());\n}"]}],["$","p",null,{"children":["は200行、19kbのエラーを生成します："]}],["$","$L18","69",{"className":"text","children":["In file included from .\\test.cpp:3:\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.28.29910\\include\\algorithm:7361:32: error: no matching function for call to object of type 'std::less<>'\n            if (_DEBUG_LT_PRED(_Pred, _Val, *_First)) { // found new earliest element, move to front\n..."]}],["$","p",null,{"children":["この問題を解決するために、C++20はconceptを導入しました。conceptは型クラスとJavaのジェネリクスの設計を取り入れており、以前のHaskellの",["$","code","0",{"children":["max"]}],"のようなプログラムを書くことができます："]}],["$","$L18","71",{"className":"cpp","children":["#include <iostream>\n#include <algorithm>\n#include <concepts>\n\ntemplate <class T> requires std::equality_comparable<T>\nbool max(T x, T y) {\n    if (x > y) {\n        return x;\n    } else {\n        return y;\n    }\n}"]}],["$","p",null,{"children":["この時に以下のように書くと："]}],["$","$L18","73",{"className":"cpp","children":["class A{};\n\nint main() {\n    max(A(), A());\n}"]}],["$","p",null,{"children":["コンパイラはエラーを報告します："]}],["$","$L18","75",{"className":"text","children":["$20"]}],["$","p",null,{"children":["ここでは、Aが",["$","code","0",{"children":["std::equality_comparable"]}],"の制約を満たしていないことが直接示されています。それにもかかわらず、ノイズは非常に多いです。さらに重要なのは、ソースコードを調査したくないライブラリ関数に対しては、効果が一般的であることです："]}],["$","$L18","77",{"className":"text","children":["$21"]}],["$","p",null,{"children":["公平に言えば、C++のテンプレート設計もいくつかの利点をもたらしています。理論的には、コンパイラには”特化”がもたらすパフォーマンス向上を得るための一般的な方法がありますが、実際の困難",["$","sup","0",{"children":[["$","a","0",{"href":"#note-1","id":"note-anchor-1","children":["1"]}]]}],"により、C++のテンプレートはパフォーマンス面で確かにいくつかの優位性を持っています（ここで言うパフォーマンスとは実行時のパフォーマンスであり、コンパイルパフォーマンスについては、C++のテンプレートは非常に悪いです）。"]}],["$","p",null,{"children":["言語設計自体よりも、私がより好きでないのは、一部のC++プログラマーの無知と、その無知がもたらす傲慢な態度です。一部の人々は、Javaのジェネリクスを”偽ジェネリクス”と呼び、C++のテンプレートのようなジェネリクスの実装だけが”真のジェネリクス”であると考えています。私は心から、これらの人々にこの記事を真剣に読むことをお勧めします。"]}],["$","div",null,{"className":"notes","children":[["$","$L22",null,{"itemId":"1","id":"note-1","children":[["$","p",null,{"children":["知乎には、Haskellなどの言語がこの問題に直面している困難を紹介する",["$","a","0",{"href":"https://zhuanlan.zhihu.com/p/456388736","children":["非常に良い記事"]}],"があります。"]}]]}]]}]]}]]}]]}]
